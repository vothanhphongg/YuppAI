var awswaf=function(){"use strict";function St(e){return e}globalThis.browser?.runtime?.id==null?globalThis.chrome:globalThis.browser;const ke=!1,le={equals:(e,t)=>e===t};let Ce=fe;const W=1,j=2;var K=null;let re=null,Te=null,C=null,T=null,$=null,Y=0;function ue(e,t){t=t?Object.assign({},le,t):le;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=o=>(typeof o=="function"&&(o=o(r.value)),ge(r,o));return[Me.bind(r),s]}function _e(e){if(C===null)return e();const t=C;C=null;try{return e()}finally{C=t}}function Me(){if(this.sources&&this.state)if(this.state===W)me(this);else{const e=T;T=null,X(()=>H(this)),T=e}if(C){const e=this.observers?this.observers.length:0;C.sources?(C.sources.push(this),C.sourceSlots.push(e)):(C.sources=[this],C.sourceSlots=[e]),this.observers?(this.observers.push(C),this.observerSlots.push(C.sources.length-1)):(this.observers=[C],this.observerSlots=[C.sources.length-1])}return this.value}function ge(e,t,r){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&X(()=>{for(let o=0;o<e.observers.length;o+=1){const i=e.observers[o],g=re&&re.running;g&&re.disposed.has(i),(g?!i.tState:!i.state)&&(i.pure?T.push(i):$.push(i),i.observers&&he(i)),g||(i.state=W)}if(T.length>1e6)throw T=[],new Error})),t}function me(e){if(!e.fn)return;z(e);const t=Y;Pe(e,e.value,t)}function Pe(e,t,r){let s;const o=K,i=C;C=K=e;try{s=e.fn(t)}catch(g){return e.pure&&(e.state=W,e.owned&&e.owned.forEach(z),e.owned=null),e.updatedAt=r+1,Ae(g)}finally{C=i,K=o}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?ge(e,s):e.value=s,e.updatedAt=r)}function de(e){if(e.state===0)return;if(e.state===j)return H(e);if(e.suspense&&_e(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Y);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===W)me(e);else if(e.state===j){const s=T;T=null,X(()=>H(e,t[0])),T=s}}function X(e,t){if(T)return e();let r=!1;T=[],$?r=!0:$=[],Y++;try{const s=e();return Ie(r),s}catch(s){r||($=null),T=null,Ae(s)}}function Ie(e){if(T&&(fe(T),T=null),e)return;const t=$;$=null,t.length&&X(()=>Ce(t))}function fe(e){for(let t=0;t<e.length;t++)de(e[t])}function H(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const s=e.sources[r];if(s.sources){const o=s.state;o===W?s!==t&&(!s.updatedAt||s.updatedAt<Y)&&de(s):o===j&&H(s,t)}}}function he(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=j,r.pure?T.push(r):$.push(r),r.observers&&he(r))}}function z(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),s=e.sourceSlots.pop(),o=r.observers;if(o&&o.length){const i=o.pop(),g=r.observerSlots.pop();s<o.length&&(i.sourceSlots[g]=s,o[s]=i,r.observerSlots[s]=g)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)z(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)z(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Re(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Ae(e,t=K){throw Re(e)}const Fe="0.2.1",qe=(e,t)=>{const r=document.createElement("div");r.style.cssText="position:fixed;top:8%;left:0;background-color:rgba(0,0,0,.6);padding:2px;color:#fff;font:calc(14px + .5vw) 'Arial',sans-serif;font-weight:bold;text-transform:uppercase;letter-spacing:1px;z-index:9999;transition:all 1s;animation:slideIn 1s forwards",r.innerHTML=`<p>${e}. Retrying in..<span id="countdown">${t}</span></p>`,document.body.appendChild(r),(()=>{const i=document.getElementById("countdown");if(!i)return;let g=t;const A=setInterval(()=>{g--,i.textContent=g,g<=0&&clearInterval(A)},1e3)})();const o=document.createElement("style");o.innerHTML="@keyframes slideIn{0%{transform:translateX(-100%)}100%{transform:translateX(0)}}@keyframes slideOut{0%{transform:translateX(0)}100%{transform:translateX(100%)}}",document.head.appendChild(o),setTimeout(()=>{r.style.animation="slideOut 1s forwards",setTimeout(()=>{document.body.removeChild(r)},1e3)},t*1e3)},B=e=>document.querySelector(e),pe=e=>document.querySelectorAll(e);function be(){return B(".task-answers")!==null}function we(){return pe(".task-image .image").length===9}function ye(){return B(".bounding-box-example")!==null}function Le(){return B(".challenge-header")!==null&&B(".bounding-box-example")===null&&B(".task-grid")==null}function $e(){const e=document.body.getBoundingClientRect();return e?.width===0||e?.height===0?!1:document.querySelector("div.check")!==null}function N(e){return new Promise(t=>setTimeout(t,e))}function Oe(e,t){return Math.floor(Math.random()*(t-e)+e)}function Ue(){try{const e=document.querySelector("div.check");return e&&e.style.display==="block"}catch(e){return console.error(e),!1}}async function Be(e){const t=await(await fetch(e,{headers:{"if-none-match":'"CFDAD5AA0CE4A3068FF1CABAC59E4D9D"'},host:"https://domain.com"})).blob();return await Ne(t)}async function Ne(e){return new Promise(t=>{const r=new FileReader;r.readAsDataURL(e),r.addEventListener("loadend",()=>{const s=r.result.replace(/^data:image\/(png|jpeg);base64,/,"");t(s)}),r.addEventListener("error",()=>{logs&&console.log("❌ Failed to convert url to base64")})})}async function xe(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch the URL: ${e}`);const r=await t.blob();return new Promise((s,o)=>{const i=new FileReader;i.readAsDataURL(r),i.addEventListener("loadend",()=>{s(i.result.replace(/^data:image\/(png|jpeg);base64,/,""))}),i.addEventListener("error",()=>{console.error("❌ Failed to read blob as base64"),o("Failed to read blob")})})}catch(t){return console.error(`❌ Failed to convert URL to base64: ${e}`,t),null}}function De(){document.querySelectorAll("iframe").forEach(t=>{t.src=t.src})}async function We(){ye()?(await N(200),document.querySelector(".display-language.button").click(),await N(100),document.querySelector(".language-selector .option:nth-child(23)").click()):we()?(await N(100),document.querySelector(".language-selector .option:nth-child(23)").click()):be()&&(document.querySelector(".display-language.button").click(),await N(200),document.querySelector(".language-selector .option:nth-child(23)").click(),await N(200))}function je(){document.querySelector(".button-submit").click()}async function Ke(){const e=navigator.userAgent;let t,r=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(r[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],`IE ${t[1]||""}`):r[1]==="Chrome"&&(t=e.match(/\b(OPR|Edge)\/(\d+)/),t!=null)?t.slice(1).join(" ").replace("OPR","Opera"):(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=e.match(/version\/(\d+)/i))!=null&&r.splice(1,1,t[1]),{version:r,platform:navigator.platform})}function Ye(e){for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}function se(e){["mouseover","mousedown","mouseup","click"].forEach(t=>{if(e.fireEvent)e.fireEvent("on"+t);else{const r=document.createEvent("MouseEvents");r.initEvent(t,!0,!1),e.dispatchEvent(r)}})}function ne(e,t,r,s,o,i,g){e.dispatchEvent(new MouseEvent(t,{bubbles:!0,clientX:r,clientY:s,buttons:o,button:i,pressure:g}))}async function Xe(e,t){const r=document.querySelector("canvas");if(e!==void 0)for(const{start:s,end:o}of e)if(Array.isArray(s)&&s.length!==0&&Array.isArray(o)&&o.length!==0){const[i,g]=s,[A,b]=o,h=r.getBoundingClientRect(),m=i+h.left,d=g+h.top,k=A+h.left,w=b+h.top;ne(r,"mousedown",m,d,1,0,1),await new Promise(R=>setTimeout(R,t));const S=k-m,E=w-d,F=Math.sqrt(S**2+E**2),P=Math.round(F/6),L=S/P,D=E/P;for(let R=1;R<=P;R++){const q=m+L*R,a=d+D*R;ne(r,"mousemove",q,a,1,0,1),await new Promise(n=>setTimeout(n,50))}ne(r,"mouseup",k,w,0,0,0)}else O.$(".button-submit").click();else O.$(".button-submit").click()}async function He(e){function t(i,g,A){const b=i.getBoundingClientRect(),h=["mouseover","mousedown","mouseup","click"],m={clientX:g+b.left,clientY:A+b.top,bubbles:!0};for(let d=0;d<h.length;d++){const k=new MouseEvent(h[d],m);i.dispatchEvent(k)}}const r=document.querySelector("canvas");r.addEventListener("mousedown",i=>{const g=r.getBoundingClientRect();i.clientX-g.left,i.clientY-g.top});const[s,o]=e;t(r,s,o),await O.sleep(300)}async function ze(e,t){const r=(await chrome.storage.local.get("customEndpoint")).customEndpoint;return t==="custom"?`https://${r}/${e}`:"https://api.captchasonic.com/createTask"}async function Ve(e){for(const t of e){const r=[...document.querySelectorAll(".answer-text")].find(s=>s.outerText===t);se(r),[...document.querySelectorAll(".answer-example")].some(s=>s.style.backgroundColor==="rgb(116, 116, 116)")||se(r)}}async function Ge(){const e=document.querySelector("canvas");if(!e)return null;const[t,r]=[e.width,e.height],o=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,t,r,{willReadFrequently:!0});if((w=>{const S=w.data;for(let E=0;E<S.length;E+=4){const F=S[E],P=S[E+1],L=S[E+2];if(F!==P||P!==L)return!1}return!0})(o))return null;const g=parseInt(e.style.width,10),A=parseInt(e.style.height,10);if(g<=0||A<=0)return null;const b=Math.min(g/t,A/r),[h,m]=[t*b,r*b],d=document.createElement("canvas");return Object.assign(d,{width:h,height:m}),d.getContext("2d",{willReadFrequently:!0}).drawImage(e,0,0,t,r,0,0,h,m),d.toDataURL("image/jpeg").replace(/^data:image\/(png|jpeg);base64,/,"")}function Je(e){return[...document.querySelectorAll(`${e}`)].map(t=>t.style.backgroundImage.replace(/url\("|"\)/g,""))}function Ze(e){return Promise.all(e.map(async(t,r)=>(e[r]=await xe(t),e[r])))}async function Qe(e,t,r){const s=e.getBoundingClientRect(),o=s.left+window.scrollX,i=s.top+window.scrollY,g=o+t,A=i+r,b=new MouseEvent("mousedown",{clientX:o,clientY:i,bubbles:!0});e.dispatchEvent(b),await new Promise(w=>setTimeout(w,1e3));const h=20,m=(g-o)/h,d=(A-i)/h;for(let w=1;w<=h;w++){const S=o+m*w,E=i+d*w,F=new MouseEvent("mousemove",{clientX:S,clientY:E,bubbles:!0});e.dispatchEvent(F),await new Promise(P=>setTimeout(P,150))}const k=new MouseEvent("mouseup",{clientX:g,clientY:A,bubbles:!0});e.dispatchEvent(k),await new Promise(w=>setTimeout(w,1e3))}async function et(e,t,r){try{const o=await(await fetch(e,{method:"POST",headers:r,body:JSON.stringify(t)})).json();if(o.code!==200){const i=o.msg;if(i){if(o.code===1||o.code===10||o.code===18||o.code===110){chrome.runtime.sendMessage({action:i}),stop=!0;return}if(o.code===17||o.code===19||o.code===429){chrome.runtime.sendMessage({action:i}),stop=!0;return}if([4,3,12,13,14,115].includes(o.code))return document.querySelector(".geetest_refresh").click(),null}}return o}catch(s){throw console.error("Error fetching coordinates:",s),s}}async function tt(e){try{const t=await fetch("https://feedback.captchasonic.com/extFeedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const r=await t.json();return console.log("Success:",r),r}catch(t){return console.error("Error sending feedback:",t),null}}function rt(e,t){const r=document.querySelector(e);if(!r){console.warn(`Element not found: ${e}`);return}return new MutationObserver(o=>{o.forEach(i=>{if(i.attributeName==="aria-hidden"){const g=r.getAttribute("aria-hidden")==="true";window.postMessage({type:"ariaHiddenChange",value:g},"*"),typeof t=="function"&&t(g)}})}).observe(r,{attributes:!0,attributeFilter:["aria-hidden"]}),r.getAttribute("aria-hidden")==="true"}function st(e,t){const r=`${e}_feedback`;chrome.storage.local.get(`${e}_solved`,s=>{s[`${e}_solved`],chrome.storage.local.get([r],o=>{const i=o[r]||[];if(i.some(A=>A.fail_report===!0)){const A=i.map(m=>m.data),h={type:"feedback",payload:{apiKey:t,data:A,pass:!1}};A.length>0&&chrome.runtime.sendMessage(h,m=>{chrome.storage.local.remove([r,`${e}_solved`,`${e}_feedback`,`${e}_hasRun`],()=>{})})}chrome.storage.local.remove([r,`${e}_solved`],()=>{})})})}function nt(e,t){const r=`${e}_feedback`;chrome.storage.local.get(`${e}_solved`,s=>{s[`${e}_solved`],chrome.storage.local.get([r],o=>{const i=o[r]||[];if(i.some(A=>A.pass_report===!0)){const A=i.map(m=>m.data),h={type:"feedback",payload:{apiKey:t,data:A,pass:!0}};A.length>0&&chrome.runtime.sendMessage(h,m=>{chrome.storage.local.remove([r,`${e}_solved`,`${e}_feedback`],()=>{})})}chrome.storage.local.remove([r,`${e}_solved`],()=>{})})})}async function ot(e,t=50,r=.1){return new Promise((s,o)=>{const i=atob(e),g=new Array(i.length);for(let d=0;d<i.length;d++)g[d]=i.charCodeAt(d);const A=new Uint8Array(g),b=new Blob([A],{type:"image/jpeg"}),h=URL.createObjectURL(b),m=new Image;m.onload=()=>{URL.revokeObjectURL(h);const d=document.createElement("canvas");d.width=m.width,d.height=m.height,d.getContext("2d").drawImage(m,0,0);let w=.9,S,E;do S=d.toDataURL("image/jpeg",w),E=S.length*3/4/1024,w-=.05;while(E>t&&w>=r);E>t?o(new Error(`Couldn't compress below ${t}KB. Final size: ${E.toFixed(2)}KB`)):s(S.split(",")[1])},m.onerror=()=>{URL.revokeObjectURL(h),o(new Error("Image load failed (possibly corrupt base64)"))},m.src=h})}async function at(e){return e.replace(/^data:image\/\w+;base64,/,"")}async function it(e){return new Promise(t=>{chrome.runtime.sendMessage({type:"GET_IMAGE_BASE64",payload:{url:e}},r=>{r?.success?t(r.data):t(null)})})}function ct(){return new Promise((e,t)=>{chrome.runtime.sendMessage({action:"getActiveTabUrl"},r=>{chrome.runtime.lastError?t(chrome.runtime.lastError):e(r.url)})})}const O={version:Fe,$:B,$$:pe,isMulti:be,isGrid:we,isBbox:ye,isBboxDD:Le,isWidget:$e,sleep:N,randTimer:Oe,isSolved:Ue,countdownNotif:qe,getBase64FromUrl:xe,refreshIframes:De,getEn:We,skip:je,getBrowser:Ke,shuffle:Ye,fireMouseEvents:se,getCanvas:He,handleCanvasDD:Xe,getApi:ze,clickMatchingElement:Ve,sliceOG:Ge,updateExamples:Ze,getExamples:Je,solveGeetestCaptcha:Qe,sendCoordinatesRequest:et,geeFetchImage:Be,sendFeedback:tt,observeAriaHidden:rt,handleCaptchaFeedback:st,handleCaptchaFeedbackOnSuccess:nt,compressPureBase64Image:ot,stripBase64Prefix:at,fetchBase64Image:it,getActiveTabUrl:ct};async function lt(e,t,r){if(!e()||e().ACTIVE===!1||e().OPTIONS[r].ENABLED===!1)return!1;function s(g,A){try{return A.some(h=>g.includes(h))}catch(b){return console.error("Error checking blacklist:",b),!1}}const o=e().BLACKLIST||[];return!(s(t(),o)&&e().BLACKLISTENABLED)}const ut={matches:["<all_urls>"],allFrames:!0,async main(){let e;try{e=window.top.document.location.href}catch{e=window.location.href}const[t]=ue(e),[r,s]=ue(await chrome.storage.local.get("settings"));if(s(r().settings),!await lt(r,t,"AWSWAF"))return;let g="",A="",b=!1,h=[],m=null,d=null;if(window.__awsWafScriptLoaded)return;window.__awsWafScriptLoaded=!0;class k{static time(){return Date.now||(Date.now=()=>new Date().getTime()),Date.now()}static date(){return new Date}static sleep(n=1e3){return new Promise(u=>setTimeout(u,n))}static async random_sleep(n,u){const c=Math.floor(Math.random()*(u-n)+n);return await k.sleep(c)}static seconds_as_hms(n){n=Math.max(0,n);const u=Util.pad_left(Math.floor(n/3600),"0",2);n%=3600;const c=Util.pad_left(Math.floor(n/60),"0",2),f=Util.pad_left(Math.floor(n%60),"0",2);return`${u}:${c}:${f}`}static string(n=null){n||(n=k.date());const u=Util.pad_left(n.getMonth()+1,"0",2),c=Util.pad_left(n.getDate(),"0",2),f=n.getFullYear(),v=Util.pad_left(n.getHours()%12,"0",2),x=Util.pad_left(n.getMinutes(),"0",2),l=Util.pad_left(n.getSeconds(),"0",2),y=n.getHours()>=12?"PM":"AM";return`${u}/${c}/${f} ${v}:${x}:${l} ${y}`}}async function w(){try{let a=null;return g==="toycarcity"||g==="gridcaptcha"?(a=document.querySelector("#amzn-btn-verify-internal"),!a&&typeof m<"u"&&m&&(a=m.querySelector("#amzn-btn-verify-internal")),!a&&typeof d<"u"&&d&&(a=d.querySelector("#amzn-btn-verify-internal")),a!==null&&getComputedStyle(a).display==="block"):(console.warn("Unknown quesType or no specific handling implemented."),!1)}catch(a){return console.error("Error in is_widget_frame function:",a),!1}}async function S(){await k.sleep(1e3);const n=document.querySelector("awswaf-captcha")?.shadowRoot||null;function u(x){const l=document.querySelector(x);return l||n?.querySelector(x)||null}n&&(m=n);const c=u(".amzn-captcha-modal em"),f=u(".amzn-captcha-modal canvas")||u("canvas");return f&&(h=function(p,M,I){p.getContext("2d");const _=p.width,U=p.height,Q=_/I,ee=U/M,Se=[];for(let ie=0;ie<M;ie++)for(let ce=0;ce<I;ce++){const xt=ce*Q,vt=ie*ee,te=document.createElement("canvas");te.width=Q,te.height=ee,te.getContext("2d").drawImage(p,xt,vt,Q,ee,0,0,Q,ee);const Et=te.toDataURL("image/png").replace(/^data:image\/(png|jpeg);base64,/,"");Se.push(Et)}return Se}(f,3,3)),await D(f)===!0&&(g="gridcaptcha"),c&&(A=c.textContent.trim()),c!==null&&f!==null}async function E(a){var n=document.getElementById("cvf-aamation-challenge-iframe");d=n.contentDocument||n.contentWindow.document;function u(x,l,y){const p=x.getBoundingClientRect(),M=["mouseover","mousedown","mouseup","click"],I={clientX:l+p.left,clientY:y+p.top,bubbles:!0};for(let _=0;_<M.length;_++){const U=new MouseEvent(M[_],I);x.dispatchEvent(U)}d.querySelector("#amzn-btn-verify-internal")?.click()}const c=d.querySelector("canvas"),f=a[0],v=a[1];u(c,f,v)}async function F(){try{const a=document.querySelector("#captcha-container > #root #amzn-captcha-verify-button");a&&a.click()}catch{}}const P=async a=>{let n=null;n=document.querySelector("canvas"),n===null&&(n=m.querySelector("canvas"));const u=n.querySelectorAll("button");for(let f=0;f<a.length;f++){const v=u[a[f]];await O.sleep(300),v.click()}await O.sleep(500);let c=null;c=document.querySelector("#amzn-btn-verify-internal"),c===null&&(c=m.querySelector("#amzn-btn-verify-internal")),c.click(),await O.sleep(1e3)};async function L(){if(b=!0,!r().ACTIVE||!r().OPTIONS.AWSWAF.AUTOSOLVE||r().BLACKLIST.includes(t()))return;k.time(),h&&await a(r().APIKEY,t(),g,h,A),h=[];async function a(n,u,c,f,v){const x={type:"networkRequest",payload:{url:"https://api.captchasonic.com/createTask",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:n,task:{type:"AwsWafImage",websiteURL:u,queries:c==="toycarcity"?[f]:[...f],question:c==="toycarcity"?"aws:toycarcity:carcity":`aws:grid:${v}`}})}};chrome.runtime.sendMessage(x,async l=>{if(l.success){if(l=l.data,l.code!==200){const y=l.msg;if(y){if(l.code===1||l.code===10||l.code===18||l.code===110){chrome.runtime.sendMessage({action:y}),q=!0;return}if(l.code===17||l.code===19||l.code===429){chrome.runtime.sendMessage({action:y}),q=!0;return}[4,3,12,13,14,115].includes(l.code)&&(c==="gridcaptcha"&&(m&&m.querySelector("#amzn-btn-refresh-internal")?.click(),document.querySelector("#amzn-btn-refresh-internal")?.click(),b=!1),c==="toycarcity"&&(d.querySelector("#amzn-btn-refresh-internal")?.click(),b=!1))}}else if(l.code===200){const y=l?.meta;if(y){const p="aws_feedback";chrome.storage.local.get([p],M=>{const I=M[p]||[];I.push(y),chrome.storage.local.set({[p]:I})})}if(l?.answers.length>0)try{c==="toycarcity"?(E(l.answers),b=!1):c.includes("gridcaptcha")&&(await P(l.answers),b=!1)}catch{chrome.runtime.sendMessage({action:"no solutions"})}else c!=="toycarcity"&&(m.querySelector("#amzn-btn-refresh-internal")?.click(),b=!1),c==="toycarcity"&&(d.querySelector("#amzn-btn-refresh-internal")?.click(),b=!1)}}else console.error("Error for Request 2:",l.error)})}}async function D(a){return a?a.querySelectorAll("button").length>0:!1}async function R(){var a=document.getElementById("cvf-aamation-challenge-iframe");if(a){var n=a.contentDocument||a.contentWindow.document,u=n.querySelector("canvas");if(u){const c=u.querySelectorAll("button");if(c.length===0||c===null||c===void 0)return!0}return!1}}let q=!1;for(chrome.storage.local.get(null,a=>{Object.keys(a).forEach(n=>{n.endsWith("_hasRun")&&chrome.storage.local.remove(n),n.endsWith("_feedback")&&chrome.storage.local.remove(n)}),chrome.storage.local.set({aws_hasRun:!1}),chrome.storage.local.set({aws_solved:!0})});q===!1&&r().OPTIONS.AWSWAF.AUTOSOLVE&&r()?.AUTOOPENENABLED&&!r().BLACKLIST.includes(t())&&r()?.OPTIONS.AWSWAF.AUTOOPEN===!0&&r()?.OPTIONS.AWSWAF.ENABLED===!0;)if(await k.sleep(3e3),await F(),await R()&&b===!1){async function a(){var n=document.getElementById("cvf-aamation-challenge-iframe");d=n.contentDocument||n.contentWindow.document;try{let c=d.querySelector("canvas");if(c===null&&(c=d.querySelector("canvas")),c){var u=c.toDataURL("image/png");h=await O.getBase64FromUrl(u),g="toycarcity",h&&await w()&&await L()}else console.error("Canvas not found inside the iframe.")}catch(c){console.error("Error accessing the iframe content:",c)}}await a()}else await S()&&b===!1&&await w()&&await L()}};function gt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var V={exports:{}},mt=V.exports,ve;function dt(){return ve||(ve=1,function(e,t){(function(r,s){s(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:mt,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const s="The message port closed before a response was received.",o=i=>{const g={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(g).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class A extends WeakMap{constructor(n,u=void 0){super(u),this.createItem=n}get(n){return this.has(n)||this.set(n,this.createItem(n)),super.get(n)}}const b=a=>a&&typeof a=="object"&&typeof a.then=="function",h=(a,n)=>(...u)=>{i.runtime.lastError?a.reject(new Error(i.runtime.lastError.message)):n.singleCallbackArg||u.length<=1&&n.singleCallbackArg!==!1?a.resolve(u[0]):a.resolve(u)},m=a=>a==1?"argument":"arguments",d=(a,n)=>function(c,...f){if(f.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${m(n.minArgs)} for ${a}(), got ${f.length}`);if(f.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${m(n.maxArgs)} for ${a}(), got ${f.length}`);return new Promise((v,x)=>{if(n.fallbackToNoCallback)try{c[a](...f,h({resolve:v,reject:x},n))}catch(l){console.warn(`${a} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,l),c[a](...f),n.fallbackToNoCallback=!1,n.noCallback=!0,v()}else n.noCallback?(c[a](...f),v()):c[a](...f,h({resolve:v,reject:x},n))})},k=(a,n,u)=>new Proxy(n,{apply(c,f,v){return u.call(f,a,...v)}});let w=Function.call.bind(Object.prototype.hasOwnProperty);const S=(a,n={},u={})=>{let c=Object.create(null),f={has(x,l){return l in a||l in c},get(x,l,y){if(l in c)return c[l];if(!(l in a))return;let p=a[l];if(typeof p=="function")if(typeof n[l]=="function")p=k(a,a[l],n[l]);else if(w(u,l)){let M=d(l,u[l]);p=k(a,a[l],M)}else p=p.bind(a);else if(typeof p=="object"&&p!==null&&(w(n,l)||w(u,l)))p=S(p,n[l],u[l]);else if(w(u,"*"))p=S(p,n[l],u["*"]);else return Object.defineProperty(c,l,{configurable:!0,enumerable:!0,get(){return a[l]},set(M){a[l]=M}}),p;return c[l]=p,p},set(x,l,y,p){return l in c?c[l]=y:a[l]=y,!0},defineProperty(x,l,y){return Reflect.defineProperty(c,l,y)},deleteProperty(x,l){return Reflect.deleteProperty(c,l)}},v=Object.create(a);return new Proxy(v,f)},E=a=>({addListener(n,u,...c){n.addListener(a.get(u),...c)},hasListener(n,u){return n.hasListener(a.get(u))},removeListener(n,u){n.removeListener(a.get(u))}}),F=new A(a=>typeof a!="function"?a:function(u){const c=S(u,{},{getContent:{minArgs:0,maxArgs:0}});a(c)}),P=new A(a=>typeof a!="function"?a:function(u,c,f){let v=!1,x,l=new Promise(I=>{x=function(_){v=!0,I(_)}}),y;try{y=a(u,c,x)}catch(I){y=Promise.reject(I)}const p=y!==!0&&b(y);if(y!==!0&&!p&&!v)return!1;const M=I=>{I.then(_=>{f(_)},_=>{let U;_&&(_ instanceof Error||typeof _.message=="string")?U=_.message:U="An unexpected error occurred",f({__mozWebExtensionPolyfillReject__:!0,message:U})}).catch(_=>{console.error("Failed to send onMessage rejected reply",_)})};return M(p?y:l),!0}),L=({reject:a,resolve:n},u)=>{i.runtime.lastError?i.runtime.lastError.message===s?n():a(new Error(i.runtime.lastError.message)):u&&u.__mozWebExtensionPolyfillReject__?a(new Error(u.message)):n(u)},D=(a,n,u,...c)=>{if(c.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${m(n.minArgs)} for ${a}(), got ${c.length}`);if(c.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${m(n.maxArgs)} for ${a}(), got ${c.length}`);return new Promise((f,v)=>{const x=L.bind(null,{resolve:f,reject:v});c.push(x),u.sendMessage(...c)})},R={devtools:{network:{onRequestFinished:E(F)}},runtime:{onMessage:E(P),onMessageExternal:E(P),sendMessage:D.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:D.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},q={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return g.privacy={network:{"*":q},services:{"*":q},websites:{"*":q}},S(i,R,g)};r.exports=o(chrome)}})}(V)),V.exports}var ft=dt();const Ee=gt(ft);function G(e,...t){}const ht={debug:(...e)=>G(console.debug,...e),log:(...e)=>G(console.log,...e),warn:(...e)=>G(console.warn,...e),error:(...e)=>G(console.error,...e)};class oe extends Event{constructor(t,r){super(oe.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=r}static EVENT_NAME=ae("wxt:locationchange")}function ae(e){return`${Ee?.runtime?.id}:awswaf:${e}`}function At(e){let t,r;return{run(){t==null&&(r=new URL(location.href),t=e.setInterval(()=>{let s=new URL(location.href);s.href!==r.href&&(window.dispatchEvent(new oe(s,r)),r=s)},1e3))}}}class J{constructor(t,r){this.contentScriptName=t,this.options=r,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=ae("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=At(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return Ee.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,r){const s=setInterval(()=>{this.isValid&&t()},r);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(t,r){const s=setTimeout(()=>{this.isValid&&t()},r);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(t){const r=requestAnimationFrame((...s)=>{this.isValid&&t(...s)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(t,r){const s=requestIdleCallback((...o)=>{this.signal.aborted||t(...o)},r);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(t,r,s,o){r==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),t.addEventListener?.(r.startsWith("wxt:")?ae(r):r,s,{...o,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),ht.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:J.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(t){const r=t.data?.type===J.SCRIPT_STARTED_MESSAGE_TYPE,s=t.data?.contentScriptName===this.contentScriptName,o=!this.receivedMessageIds.has(t.data?.messageId);return r&&s&&o}listenForNewerScripts(t){let r=!0;const s=o=>{if(this.verifyScriptStartedEvent(o)){this.receivedMessageIds.add(o.data.messageId);const i=r;if(r=!1,i&&t?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))}}const pt=Symbol("null");let bt=0;class wt extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[t]=arguments;if(t!=null){if(typeof t[Symbol.iterator]!="function")throw new TypeError(typeof t+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[r,s]of t)this.set(r,s)}}_getPublicKeys(t,r=!1){if(!Array.isArray(t))throw new TypeError("The keys parameter must be an array");const s=this._getPrivateKey(t,r);let o;return s&&this._publicKeys.has(s)?o=this._publicKeys.get(s):r&&(o=[...t],this._publicKeys.set(s,o)),{privateKey:s,publicKey:o}}_getPrivateKey(t,r=!1){const s=[];for(let o of t){o===null&&(o=pt);const i=typeof o=="object"||typeof o=="function"?"_objectHashes":typeof o=="symbol"?"_symbolHashes":!1;if(!i)s.push(o);else if(this[i].has(o))s.push(this[i].get(o));else if(r){const g=`@@mkm-ref-${bt++}@@`;this[i].set(o,g),s.push(g)}else return!1}return JSON.stringify(s)}set(t,r){const{publicKey:s}=this._getPublicKeys(t,!0);return super.set(s,r)}get(t){const{publicKey:r}=this._getPublicKeys(t);return super.get(r)}has(t){const{publicKey:r}=this._getPublicKeys(t);return super.has(r)}delete(t){const{publicKey:r,privateKey:s}=this._getPublicKeys(t);return!!(r&&super.delete(r)&&this._publicKeys.delete(s))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new wt;function Tt(){}function Z(e,...t){}const yt={debug:(...e)=>Z(console.debug,...e),log:(...e)=>Z(console.log,...e),warn:(...e)=>Z(console.warn,...e),error:(...e)=>Z(console.error,...e)};return(async()=>{try{const{main:e,...t}=ut,r=new J("awswaf",t);return await e(r)}catch(e){throw yt.error('The content script "awswaf" crashed on startup!',e),e}})()}();
awswaf;
