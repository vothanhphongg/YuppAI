var tencent=function(){"use strict";function Et(e){return e}const ke=!1,ue={equals:(e,t)=>e===t};let Ce=he;const W=1,H=2;var V=null;let ne=null,Te=null,T=null,M=null,N=null,G=0;function ge(e,t){t=t?Object.assign({},ue,t):ue;const s={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=n=>(typeof n=="function"&&(n=n(s.value)),me(s,n));return[Ie.bind(s),r]}function Pe(e){if(T===null)return e();const t=T;T=null;try{return e()}finally{T=t}}function Ie(){if(this.sources&&this.state)if(this.state===W)de(this);else{const e=M;M=null,z(()=>J(this)),M=e}if(T){const e=this.observers?this.observers.length:0;T.sources?(T.sources.push(this),T.sourceSlots.push(e)):(T.sources=[this],T.sourceSlots=[e]),this.observers?(this.observers.push(T),this.observerSlots.push(T.sources.length-1)):(this.observers=[T],this.observerSlots=[T.sources.length-1])}return this.value}function me(e,t,s){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&z(()=>{for(let n=0;n<e.observers.length;n+=1){const i=e.observers[n],g=ne&&ne.running;g&&ne.disposed.has(i),(g?!i.tState:!i.state)&&(i.pure?M.push(i):N.push(i),i.observers&&Ae(i)),g||(i.state=W)}if(M.length>1e6)throw M=[],new Error})),t}function de(e){if(!e.fn)return;Z(e);const t=G;_e(e,e.value,t)}function _e(e,t,s){let r;const n=V,i=T;T=V=e;try{r=e.fn(t)}catch(g){return e.pure&&(e.state=W,e.owned&&e.owned.forEach(Z),e.owned=null),e.updatedAt=s+1,pe(g)}finally{T=i,V=n}(!e.updatedAt||e.updatedAt<=s)&&(e.updatedAt!=null&&"observers"in e?me(e,r):e.value=r,e.updatedAt=s)}function fe(e){if(e.state===0)return;if(e.state===H)return J(e);if(e.suspense&&Pe(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<G);)e.state&&t.push(e);for(let s=t.length-1;s>=0;s--)if(e=t[s],e.state===W)de(e);else if(e.state===H){const r=M;M=null,z(()=>J(e,t[0])),M=r}}function z(e,t){if(M)return e();let s=!1;M=[],N?s=!0:N=[],G++;try{const r=e();return Me(s),r}catch(r){s||(N=null),M=null,pe(r)}}function Me(e){if(M&&(he(M),M=null),e)return;const t=N;N=null,t.length&&z(()=>Ce(t))}function he(e){for(let t=0;t<e.length;t++)fe(e[t])}function J(e,t){e.state=0;for(let s=0;s<e.sources.length;s+=1){const r=e.sources[s];if(r.sources){const n=r.state;n===W?r!==t&&(!r.updatedAt||r.updatedAt<G)&&fe(r):n===H&&J(r,t)}}}function Ae(e){for(let t=0;t<e.observers.length;t+=1){const s=e.observers[t];s.state||(s.state=H,s.pure?M.push(s):N.push(s),s.observers&&Ae(s))}}function Z(e){let t;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),r=e.sourceSlots.pop(),n=s.observers;if(n&&n.length){const i=n.pop(),g=s.observerSlots.pop();r<n.length&&(i.sourceSlots[g]=r,n[r]=i,s.observerSlots[r]=g)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Z(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Z(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Re(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function pe(e,t=V){throw Re(e)}const qe="0.2.1",Be=(e,t)=>{const s=document.createElement("div");s.style.cssText="position:fixed;top:8%;left:0;background-color:rgba(0,0,0,.6);padding:2px;color:#fff;font:calc(14px + .5vw) 'Arial',sans-serif;font-weight:bold;text-transform:uppercase;letter-spacing:1px;z-index:9999;transition:all 1s;animation:slideIn 1s forwards",s.innerHTML=`<p>${e}. Retrying in..<span id="countdown">${t}</span></p>`,document.body.appendChild(s),(()=>{const i=document.getElementById("countdown");if(!i)return;let g=t;const b=setInterval(()=>{g--,i.textContent=g,g<=0&&clearInterval(b)},1e3)})();const n=document.createElement("style");n.innerHTML="@keyframes slideIn{0%{transform:translateX(-100%)}100%{transform:translateX(0)}}@keyframes slideOut{0%{transform:translateX(0)}100%{transform:translateX(100%)}}",document.head.appendChild(n),setTimeout(()=>{s.style.animation="slideOut 1s forwards",setTimeout(()=>{document.body.removeChild(s)},1e3)},t*1e3)},K=e=>document.querySelector(e),be=e=>document.querySelectorAll(e);function we(){return K(".task-answers")!==null}function ye(){return be(".task-image .image").length===9}function xe(){return K(".bounding-box-example")!==null}function Fe(){return K(".challenge-header")!==null&&K(".bounding-box-example")===null&&K(".task-grid")==null}function $e(){const e=document.body.getBoundingClientRect();return e?.width===0||e?.height===0?!1:document.querySelector("div.check")!==null}function Y(e){return new Promise(t=>setTimeout(t,e))}function Le(e,t){return Math.floor(Math.random()*(t-e)+e)}function Oe(){try{const e=document.querySelector("div.check");return e&&e.style.display==="block"}catch(e){return console.error(e),!1}}async function Ne(e){const t=await(await fetch(e,{headers:{"if-none-match":'"CFDAD5AA0CE4A3068FF1CABAC59E4D9D"'},host:"https://domain.com"})).blob();return await Ue(t)}async function Ue(e){return new Promise(t=>{const s=new FileReader;s.readAsDataURL(e),s.addEventListener("loadend",()=>{const r=s.result.replace(/^data:image\/(png|jpeg);base64,/,"");t(r)}),s.addEventListener("error",()=>{logs&&console.log("❌ Failed to convert url to base64")})})}async function ve(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch the URL: ${e}`);const s=await t.blob();return new Promise((r,n)=>{const i=new FileReader;i.readAsDataURL(s),i.addEventListener("loadend",()=>{r(i.result.replace(/^data:image\/(png|jpeg);base64,/,""))}),i.addEventListener("error",()=>{console.error("❌ Failed to read blob as base64"),n("Failed to read blob")})})}catch(t){return console.error(`❌ Failed to convert URL to base64: ${e}`,t),null}}function je(){document.querySelectorAll("iframe").forEach(t=>{t.src=t.src})}async function De(){xe()?(await Y(200),document.querySelector(".display-language.button").click(),await Y(100),document.querySelector(".language-selector .option:nth-child(23)").click()):ye()?(await Y(100),document.querySelector(".language-selector .option:nth-child(23)").click()):we()&&(document.querySelector(".display-language.button").click(),await Y(200),document.querySelector(".language-selector .option:nth-child(23)").click(),await Y(200))}function Ke(){document.querySelector(".button-submit").click()}async function Ye(){const e=navigator.userAgent;let t,s=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(s[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],`IE ${t[1]||""}`):s[1]==="Chrome"&&(t=e.match(/\b(OPR|Edge)\/(\d+)/),t!=null)?t.slice(1).join(" ").replace("OPR","Opera"):(s=s[2]?[s[1],s[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=e.match(/version\/(\d+)/i))!=null&&s.splice(1,1,t[1]),{version:s,platform:navigator.platform})}function Xe(e){for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}function oe(e){["mouseover","mousedown","mouseup","click"].forEach(t=>{if(e.fireEvent)e.fireEvent("on"+t);else{const s=document.createEvent("MouseEvents");s.initEvent(t,!0,!1),e.dispatchEvent(s)}})}function ae(e,t,s,r,n,i,g){e.dispatchEvent(new MouseEvent(t,{bubbles:!0,clientX:s,clientY:r,buttons:n,button:i,pressure:g}))}async function We(e,t){const s=document.querySelector("canvas");if(e!==void 0)for(const{start:r,end:n}of e)if(Array.isArray(r)&&r.length!==0&&Array.isArray(n)&&n.length!==0){const[i,g]=r,[b,P]=n,x=s.getBoundingClientRect(),A=i+x.left,v=g+x.top,F=b+x.left,S=P+x.top;ae(s,"mousedown",A,v,1,0,1),await new Promise(f=>setTimeout(f,t));const C=F-A,k=S-v,L=Math.sqrt(C**2+k**2),$=Math.round(L/6),U=C/$,d=k/$;for(let f=1;f<=$;f++){const E=A+U*f,o=v+d*f;ae(s,"mousemove",E,o,1,0,1),await new Promise(a=>setTimeout(a,50))}ae(s,"mouseup",F,S,0,0,0)}else B.$(".button-submit").click();else B.$(".button-submit").click()}async function He(e){function t(i,g,b){const P=i.getBoundingClientRect(),x=["mouseover","mousedown","mouseup","click"],A={clientX:g+P.left,clientY:b+P.top,bubbles:!0};for(let v=0;v<x.length;v++){const F=new MouseEvent(x[v],A);i.dispatchEvent(F)}}const s=document.querySelector("canvas");s.addEventListener("mousedown",i=>{const g=s.getBoundingClientRect();i.clientX-g.left,i.clientY-g.top});const[r,n]=e;t(s,r,n),await B.sleep(300)}async function Ve(e,t){const s=(await chrome.storage.local.get("customEndpoint")).customEndpoint;return t==="custom"?`https://${s}/${e}`:"https://api.captchasonic.com/createTask"}async function Ge(e){for(const t of e){const s=[...document.querySelectorAll(".answer-text")].find(r=>r.outerText===t);oe(s),[...document.querySelectorAll(".answer-example")].some(r=>r.style.backgroundColor==="rgb(116, 116, 116)")||oe(s)}}async function ze(){const e=document.querySelector("canvas");if(!e)return null;const[t,s]=[e.width,e.height],n=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,t,s,{willReadFrequently:!0});if((S=>{const C=S.data;for(let k=0;k<C.length;k+=4){const L=C[k],$=C[k+1],U=C[k+2];if(L!==$||$!==U)return!1}return!0})(n))return null;const g=parseInt(e.style.width,10),b=parseInt(e.style.height,10);if(g<=0||b<=0)return null;const P=Math.min(g/t,b/s),[x,A]=[t*P,s*P],v=document.createElement("canvas");return Object.assign(v,{width:x,height:A}),v.getContext("2d",{willReadFrequently:!0}).drawImage(e,0,0,t,s,0,0,x,A),v.toDataURL("image/jpeg").replace(/^data:image\/(png|jpeg);base64,/,"")}function Je(e){return[...document.querySelectorAll(`${e}`)].map(t=>t.style.backgroundImage.replace(/url\("|"\)/g,""))}function Ze(e){return Promise.all(e.map(async(t,s)=>(e[s]=await ve(t),e[s])))}async function Qe(e,t,s){const r=e.getBoundingClientRect(),n=r.left+window.scrollX,i=r.top+window.scrollY,g=n+t,b=i+s,P=new MouseEvent("mousedown",{clientX:n,clientY:i,bubbles:!0});e.dispatchEvent(P),await new Promise(S=>setTimeout(S,1e3));const x=20,A=(g-n)/x,v=(b-i)/x;for(let S=1;S<=x;S++){const C=n+A*S,k=i+v*S,L=new MouseEvent("mousemove",{clientX:C,clientY:k,bubbles:!0});e.dispatchEvent(L),await new Promise($=>setTimeout($,150))}const F=new MouseEvent("mouseup",{clientX:g,clientY:b,bubbles:!0});e.dispatchEvent(F),await new Promise(S=>setTimeout(S,1e3))}async function et(e,t,s){try{const n=await(await fetch(e,{method:"POST",headers:s,body:JSON.stringify(t)})).json();if(n.code!==200){const i=n.msg;if(i){if(n.code===1||n.code===10||n.code===18||n.code===110){chrome.runtime.sendMessage({action:i}),stop=!0;return}if(n.code===17||n.code===19||n.code===429){chrome.runtime.sendMessage({action:i}),stop=!0;return}if([4,3,12,13,14,115].includes(n.code))return document.querySelector(".geetest_refresh").click(),null}}return n}catch(r){throw console.error("Error fetching coordinates:",r),r}}async function tt(e){try{const t=await fetch("https://feedback.captchasonic.com/extFeedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const s=await t.json();return console.log("Success:",s),s}catch(t){return console.error("Error sending feedback:",t),null}}function st(e,t){const s=document.querySelector(e);if(!s){console.warn(`Element not found: ${e}`);return}return new MutationObserver(n=>{n.forEach(i=>{if(i.attributeName==="aria-hidden"){const g=s.getAttribute("aria-hidden")==="true";window.postMessage({type:"ariaHiddenChange",value:g},"*"),typeof t=="function"&&t(g)}})}).observe(s,{attributes:!0,attributeFilter:["aria-hidden"]}),s.getAttribute("aria-hidden")==="true"}function rt(e,t){const s=`${e}_feedback`;chrome.storage.local.get(`${e}_solved`,r=>{r[`${e}_solved`],chrome.storage.local.get([s],n=>{const i=n[s]||[];if(i.some(b=>b.fail_report===!0)){const b=i.map(A=>A.data),x={type:"feedback",payload:{apiKey:t,data:b,pass:!1}};b.length>0&&chrome.runtime.sendMessage(x,A=>{chrome.storage.local.remove([s,`${e}_solved`,`${e}_feedback`,`${e}_hasRun`],()=>{})})}chrome.storage.local.remove([s,`${e}_solved`],()=>{})})})}function nt(e,t){const s=`${e}_feedback`;chrome.storage.local.get(`${e}_solved`,r=>{r[`${e}_solved`],chrome.storage.local.get([s],n=>{const i=n[s]||[];if(i.some(b=>b.pass_report===!0)){const b=i.map(A=>A.data),x={type:"feedback",payload:{apiKey:t,data:b,pass:!0}};b.length>0&&chrome.runtime.sendMessage(x,A=>{chrome.storage.local.remove([s,`${e}_solved`,`${e}_feedback`],()=>{})})}chrome.storage.local.remove([s,`${e}_solved`],()=>{})})})}async function ot(e,t=50,s=.1){return new Promise((r,n)=>{const i=atob(e),g=new Array(i.length);for(let v=0;v<i.length;v++)g[v]=i.charCodeAt(v);const b=new Uint8Array(g),P=new Blob([b],{type:"image/jpeg"}),x=URL.createObjectURL(P),A=new Image;A.onload=()=>{URL.revokeObjectURL(x);const v=document.createElement("canvas");v.width=A.width,v.height=A.height,v.getContext("2d").drawImage(A,0,0);let S=.9,C,k;do C=v.toDataURL("image/jpeg",S),k=C.length*3/4/1024,S-=.05;while(k>t&&S>=s);k>t?n(new Error(`Couldn't compress below ${t}KB. Final size: ${k.toFixed(2)}KB`)):r(C.split(",")[1])},A.onerror=()=>{URL.revokeObjectURL(x),n(new Error("Image load failed (possibly corrupt base64)"))},A.src=x})}async function at(e){return e.replace(/^data:image\/\w+;base64,/,"")}async function it(e){return new Promise(t=>{chrome.runtime.sendMessage({type:"GET_IMAGE_BASE64",payload:{url:e}},s=>{s?.success?t(s.data):t(null)})})}function ct(){return new Promise((e,t)=>{chrome.runtime.sendMessage({action:"getActiveTabUrl"},s=>{chrome.runtime.lastError?t(chrome.runtime.lastError):e(s.url)})})}const B={version:qe,$:K,$$:be,isMulti:we,isGrid:ye,isBbox:xe,isBboxDD:Fe,isWidget:$e,sleep:Y,randTimer:Le,isSolved:Oe,countdownNotif:Be,getBase64FromUrl:ve,refreshIframes:je,getEn:De,skip:Ke,getBrowser:Ye,shuffle:Xe,fireMouseEvents:oe,getCanvas:He,handleCanvasDD:We,getApi:Ve,clickMatchingElement:Ge,sliceOG:ze,updateExamples:Ze,getExamples:Je,solveGeetestCaptcha:Qe,sendCoordinatesRequest:et,geeFetchImage:Ne,sendFeedback:tt,observeAriaHidden:st,handleCaptchaFeedback:rt,handleCaptchaFeedbackOnSuccess:nt,compressPureBase64Image:ot,stripBase64Prefix:at,fetchBase64Image:it,getActiveTabUrl:ct},lt={matches:["<all_urls>"],allFrames:!0,async main(){let e;try{e=window.top.location.href}catch{e=window.location.href}const[t]=ge(e),[s,r]=ge(await chrome.storage.local.get("settings"));r(s().settings);let n=!1,i=null,g=null;if(window.tencentCap)return;window.tencentCap=!0;const b=()=>!navigator.onLine||s().APIKEY===void 0||s().APIKEY===""||s().ACTIVE===!1;for(;!b()&&n===!0;){await B.sleep(3e3);let d=document.querySelector(".tencent-captcha-dy__click-type-wrap"),f=document.querySelector(".tc-img-select"),E=document.querySelector(".tencent-captcha-dy__slider-type-wrap"),o=document.querySelector("#TencentCaptcha");const a=document.getElementById("tcaptcha_transform_dy");let c=document.querySelector(".show-success"),l=a?.style.position,m=null,w=document.querySelector("#tencent-captcha-dy__robot_checkBox_id");if(document.querySelector("#tcaptcha_transform_dy")?.style.opacity,w&&n===!1&&(console.log("Tencent Checkbox Clicked"),w.click()),a&&l==="absolute"&&(m=window.getComputedStyle(a).getPropertyValue("opacity")),o&&m==="0"&&c===null&&s().OPTIONS.TENCENT.AUTOOPEN===!0&&o.click(),f){const h=document.querySelector("#slideBg"),u=document.querySelector(".tc-opera.show-loading"),p=document.querySelector("body").getAttribute("aria-hidden");if(h&&u===null&&p==="false"){const y=await F(),R=document.querySelector("#instructionText");let I=null;if(R&&(I=R.textContent.trim(),I=I.replace(/^["“'\\/]+|["”'\\/]+$/g,""),g=document.querySelector(".refreshButton"),i=document.querySelector("#verifyBtn")),I&&y.length>0&&n===!1){n=!0;const _=document.querySelector("#slideBg"),j={type:"networkRequest",payload:{url:"https://api.captchasonic.com/createTask",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:s().APIKEY,source:"chrome",version:"1.9.0",appID:0,task:{type:"tencentClassification",captchaId:"fcd636b4514bf7ac4143922550b3008b",queries:y,examples:[],question:`tencent_grid:${I}`,websiteURL:t()}})}};chrome.runtime.sendMessage(j,async D=>{if(D.success){const q=D.data;if(q.code!==200){const O=q.msg;O&&((q.code===1||q.code===10||q.code===18||q.code===110)&&(chrome.runtime.sendMessage({action:O}),n=!0),(q.code===17||q.code===19||q.code===429)&&(chrome.runtime.sendMessage({action:O}),n=!0),[4,3,12,13,14,115].includes(q.code)&&(g?.click(),n=!1))}else if(q.code===200){const O=q.answers.size,re=_.getBoundingClientRect(),X=re.width/O[0],le=re.height/O[1],yt=q.answers.sol.map(([xt,vt])=>[xt*X,vt*le]);await x(_,yt),await v(),setTimeout(()=>{n=!1},3e3)}}else console.error("Error for Request 2:",D.error)})}}}else{if(d)return;if(E){n=!0;const h=await P({type:"slideImage"});if(h){console.log("Slide CAPTCHA payload ready:",h);const u=await L(h),p=document.querySelector(".tencent-captcha-dy__fg-item"),y=document.querySelector(".tencent-captcha-dy__verify-bg div");await U(p,y,u.answers[0],u.answers[1],u.size[0],u.size[1])}}}}async function P({type:d,solveType:f="",questionType:E=""}={}){try{const o=s()?.APIKEY,a=t(),c=B.version;if(!o)throw new Error("API key is missing.");const l={apiKey:o,source:"chrome",version:c,appID:0,task:{type:d,websiteURL:a,queries:[]}};if(d==="tencentClassification"){l.task.question=`${f}:${E}`,l.task.captchaId="12345",l.task.examples=[];const m=document.querySelector(".tencent-captcha-dy__header-answer img");if(m?.src){const p=await $(m.src);l.task.examples.push(...p)}const u=document.querySelector(".tencent-captcha-dy__verify-bg-img")?.style?.backgroundImage?.match(/url\(["']?(.*?)["']?\)/)?.[1];if(u){const p=await B.getBase64FromUrl(u);l.task.queries.push(p)}}else if(d==="slideImage"){const m=document.querySelector(".tencent-captcha-dy__verify-bg div");if(!m)throw new Error("CAPTCHA container not found.");const h=window.getComputedStyle(m).backgroundImage;if(!h||h==="none")throw new Error("Background image not set.");const u=h.match(/url\(["']?(.*?)["']?\)/);if(!u||!u[1])throw new Error("Failed to extract image URL.");const p=await B.getBase64FromUrl(u[1]);l.task.queries.push(p)}return l}catch(o){return console.error("generateCaptchaPayload Error:",o.message),null}}async function x(d,f){for(const[E,o]of f)await A(d,E,o),await B.sleep(1e3)}async function A(d,f,E){const o=d.getBoundingClientRect(),a=o.left+f,c=o.top+E;["mousedown","mouseup","click"].forEach(l=>{const m=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,clientX:a,clientY:c});d.dispatchEvent(m)}),await B.sleep(1e3)}async function v(){i&&i.click(),await B.sleep(3e3)}async function F(){const d=document.querySelector("#slideBg");if(!d)return console.error("Element #slideBg not found"),[];try{return await S(d,2,3)}catch(f){return console.error("Error slicing image:",f),[]}}async function S(d,f,E){const a=window.getComputedStyle(d).getPropertyValue("background-image").match(/url\(["']?(.*?)["']?\)/)?.[1];if(!a)throw new Error("No background-image URL found");const c=await k(a);return await C(c,f,E)}async function C(d,f=2,E=3){const o=[],a=d.width/E,c=d.height/f,l=document.createElement("canvas"),m=l.getContext("2d");l.width=a,l.height=c;for(let w=0;w<f;w++)for(let h=0;h<E;h++){m.clearRect(0,0,l.width,l.height),m.drawImage(d,h*a,w*c,a,c,0,0,a,c);const u=l.toDataURL("image/png").split(",")[1];o.push(u)}return o}function k(d){return new Promise((f,E)=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>f(o),o.onerror=E,o.src=d})}async function L(d){return new Promise((f,E)=>{try{const o={type:"networkRequest",payload:{url:"https://api.captchasonic.com/createTask",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}};chrome.runtime.sendMessage(o,async a=>{if(a.success){const c=a.data;if(c.code!==200){const l=c.msg;if(l){if(c.code===1||c.code===10||c.code===18||a.code===110){chrome.runtime.sendMessage({action:l}),n=!0;return}if(c.code===17||c.code===19||c.code===429){chrome.runtime.sendMessage({action:l}),n=!0;return}if([4,3,12,13,14,115].includes(c.code)){let m=document.querySelectorAll(".geetest_refresh");return m[m.length-1].click(),f(null)}}}else if(c.code===200)return f(c)}else console.error("Error for Request 2:",a.error)})}catch(o){return console.error("Error fetching coordinates:",o),E(o)}})}async function $(d){return new Promise((f,E)=>{const o=new Image;o.crossOrigin="anonymous",o.src=d,o.onload=function(){const a=document.createElement("canvas"),c=a.getContext("2d");a.width=o.width,a.height=o.height,c.drawImage(o,0,0);const m=o.width/3,w=o.height,h=[];for(let u=0;u<3;u++){const p=document.createElement("canvas"),y=p.getContext("2d");p.width=m,p.height=w,y.drawImage(a,u*m,0,m,w,0,0,m,w);const I=p.toDataURL("image/png").split(",")[1];h.push(I)}f(h)},o.onerror=function(a){E("Failed to load image: "+a)}})}async function U(d,f,E,o,a,c){const l=f.getBoundingClientRect(),m=l.left+window.scrollX,w=l.top+window.scrollY,h=l.width/a,u=l.height/c,p=m+E*h,y=w+o*u,R=d.getBoundingClientRect(),I=R.left+R.width/2+window.scrollX,_=R.top+R.height/2+window.scrollY,j=new MouseEvent("mousedown",{clientX:I,clientY:_,bubbles:!0});d.dispatchEvent(j),await B.sleep(500);const D=30,q=(p-I)/D,O=(y-_)/D;for(let X=1;X<=D;X++){const le=new MouseEvent("mousemove",{clientX:I+q*X,clientY:_+O*X,bubbles:!0});d.dispatchEvent(le),await B.sleep(50)}const re=new MouseEvent("mouseup",{clientX:p,clientY:y,bubbles:!0});d.dispatchEvent(re),await B.sleep(50)}}};function ut(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Q={exports:{}},gt=Q.exports,Ee;function mt(){return Ee||(Ee=1,function(e,t){(function(s,r){r(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:gt,function(s){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)s.exports=globalThis.browser;else{const r="The message port closed before a response was received.",n=i=>{const g={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(g).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class b extends WeakMap{constructor(a,c=void 0){super(c),this.createItem=a}get(a){return this.has(a)||this.set(a,this.createItem(a)),super.get(a)}}const P=o=>o&&typeof o=="object"&&typeof o.then=="function",x=(o,a)=>(...c)=>{i.runtime.lastError?o.reject(new Error(i.runtime.lastError.message)):a.singleCallbackArg||c.length<=1&&a.singleCallbackArg!==!1?o.resolve(c[0]):o.resolve(c)},A=o=>o==1?"argument":"arguments",v=(o,a)=>function(l,...m){if(m.length<a.minArgs)throw new Error(`Expected at least ${a.minArgs} ${A(a.minArgs)} for ${o}(), got ${m.length}`);if(m.length>a.maxArgs)throw new Error(`Expected at most ${a.maxArgs} ${A(a.maxArgs)} for ${o}(), got ${m.length}`);return new Promise((w,h)=>{if(a.fallbackToNoCallback)try{l[o](...m,x({resolve:w,reject:h},a))}catch(u){console.warn(`${o} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,u),l[o](...m),a.fallbackToNoCallback=!1,a.noCallback=!0,w()}else a.noCallback?(l[o](...m),w()):l[o](...m,x({resolve:w,reject:h},a))})},F=(o,a,c)=>new Proxy(a,{apply(l,m,w){return c.call(m,o,...w)}});let S=Function.call.bind(Object.prototype.hasOwnProperty);const C=(o,a={},c={})=>{let l=Object.create(null),m={has(h,u){return u in o||u in l},get(h,u,p){if(u in l)return l[u];if(!(u in o))return;let y=o[u];if(typeof y=="function")if(typeof a[u]=="function")y=F(o,o[u],a[u]);else if(S(c,u)){let R=v(u,c[u]);y=F(o,o[u],R)}else y=y.bind(o);else if(typeof y=="object"&&y!==null&&(S(a,u)||S(c,u)))y=C(y,a[u],c[u]);else if(S(c,"*"))y=C(y,a[u],c["*"]);else return Object.defineProperty(l,u,{configurable:!0,enumerable:!0,get(){return o[u]},set(R){o[u]=R}}),y;return l[u]=y,y},set(h,u,p,y){return u in l?l[u]=p:o[u]=p,!0},defineProperty(h,u,p){return Reflect.defineProperty(l,u,p)},deleteProperty(h,u){return Reflect.deleteProperty(l,u)}},w=Object.create(o);return new Proxy(w,m)},k=o=>({addListener(a,c,...l){a.addListener(o.get(c),...l)},hasListener(a,c){return a.hasListener(o.get(c))},removeListener(a,c){a.removeListener(o.get(c))}}),L=new b(o=>typeof o!="function"?o:function(c){const l=C(c,{},{getContent:{minArgs:0,maxArgs:0}});o(l)}),$=new b(o=>typeof o!="function"?o:function(c,l,m){let w=!1,h,u=new Promise(I=>{h=function(_){w=!0,I(_)}}),p;try{p=o(c,l,h)}catch(I){p=Promise.reject(I)}const y=p!==!0&&P(p);if(p!==!0&&!y&&!w)return!1;const R=I=>{I.then(_=>{m(_)},_=>{let j;_&&(_ instanceof Error||typeof _.message=="string")?j=_.message:j="An unexpected error occurred",m({__mozWebExtensionPolyfillReject__:!0,message:j})}).catch(_=>{console.error("Failed to send onMessage rejected reply",_)})};return R(y?p:u),!0}),U=({reject:o,resolve:a},c)=>{i.runtime.lastError?i.runtime.lastError.message===r?a():o(new Error(i.runtime.lastError.message)):c&&c.__mozWebExtensionPolyfillReject__?o(new Error(c.message)):a(c)},d=(o,a,c,...l)=>{if(l.length<a.minArgs)throw new Error(`Expected at least ${a.minArgs} ${A(a.minArgs)} for ${o}(), got ${l.length}`);if(l.length>a.maxArgs)throw new Error(`Expected at most ${a.maxArgs} ${A(a.maxArgs)} for ${o}(), got ${l.length}`);return new Promise((m,w)=>{const h=U.bind(null,{resolve:m,reject:w});l.push(h),c.sendMessage(...l)})},f={devtools:{network:{onRequestFinished:k(L)}},runtime:{onMessage:k($),onMessageExternal:k($),sendMessage:d.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:d.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},E={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return g.privacy={network:{"*":E},services:{"*":E},websites:{"*":E}},C(i,f,g)};s.exports=n(chrome)}})}(Q)),Q.exports}var dt=mt();const Se=ut(dt);function ee(e,...t){}const ft={debug:(...e)=>ee(console.debug,...e),log:(...e)=>ee(console.log,...e),warn:(...e)=>ee(console.warn,...e),error:(...e)=>ee(console.error,...e)};class ie extends Event{constructor(t,s){super(ie.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=s}static EVENT_NAME=ce("wxt:locationchange")}function ce(e){return`${Se?.runtime?.id}:tencent:${e}`}function ht(e){let t,s;return{run(){t==null&&(s=new URL(location.href),t=e.setInterval(()=>{let r=new URL(location.href);r.href!==s.href&&(window.dispatchEvent(new ie(r,s)),s=r)},1e3))}}}class te{constructor(t,s){this.contentScriptName=t,this.options=s,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=ce("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=ht(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return Se.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,s){const r=setInterval(()=>{this.isValid&&t()},s);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(t,s){const r=setTimeout(()=>{this.isValid&&t()},s);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(t){const s=requestAnimationFrame((...r)=>{this.isValid&&t(...r)});return this.onInvalidated(()=>cancelAnimationFrame(s)),s}requestIdleCallback(t,s){const r=requestIdleCallback((...n)=>{this.signal.aborted||t(...n)},s);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(t,s,r,n){s==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),t.addEventListener?.(s.startsWith("wxt:")?ce(s):s,r,{...n,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),ft.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:te.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(t){const s=t.data?.type===te.SCRIPT_STARTED_MESSAGE_TYPE,r=t.data?.contentScriptName===this.contentScriptName,n=!this.receivedMessageIds.has(t.data?.messageId);return s&&r&&n}listenForNewerScripts(t){let s=!0;const r=n=>{if(this.verifyScriptStartedEvent(n)){this.receivedMessageIds.add(n.data.messageId);const i=s;if(s=!1,i&&t?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",r),this.onInvalidated(()=>removeEventListener("message",r))}}const At=Symbol("null");let pt=0;class bt extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[t]=arguments;if(t!=null){if(typeof t[Symbol.iterator]!="function")throw new TypeError(typeof t+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[s,r]of t)this.set(s,r)}}_getPublicKeys(t,s=!1){if(!Array.isArray(t))throw new TypeError("The keys parameter must be an array");const r=this._getPrivateKey(t,s);let n;return r&&this._publicKeys.has(r)?n=this._publicKeys.get(r):s&&(n=[...t],this._publicKeys.set(r,n)),{privateKey:r,publicKey:n}}_getPrivateKey(t,s=!1){const r=[];for(let n of t){n===null&&(n=At);const i=typeof n=="object"||typeof n=="function"?"_objectHashes":typeof n=="symbol"?"_symbolHashes":!1;if(!i)r.push(n);else if(this[i].has(n))r.push(this[i].get(n));else if(s){const g=`@@mkm-ref-${pt++}@@`;this[i].set(n,g),r.push(g)}else return!1}return JSON.stringify(r)}set(t,s){const{publicKey:r}=this._getPublicKeys(t,!0);return super.set(r,s)}get(t){const{publicKey:s}=this._getPublicKeys(t);return super.get(s)}has(t){const{publicKey:s}=this._getPublicKeys(t);return super.has(s)}delete(t){const{publicKey:s,privateKey:r}=this._getPublicKeys(t);return!!(s&&super.delete(s)&&this._publicKeys.delete(r))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new bt;function Ct(){}function se(e,...t){}const wt={debug:(...e)=>se(console.debug,...e),log:(...e)=>se(console.log,...e),warn:(...e)=>se(console.warn,...e),error:(...e)=>se(console.error,...e)};return(async()=>{try{const{main:e,...t}=lt,s=new te("tencent",t);return await e(s)}catch(e){throw wt.error('The content script "tencent" crashed on startup!',e),e}})()}();
tencent;
