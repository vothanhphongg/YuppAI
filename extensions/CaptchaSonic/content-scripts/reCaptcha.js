var recaptcha=function(){"use strict";function qt(e){return e}const Me=!1,he={equals:(e,t)=>e===t};let Oe=we;const J=1,z=2;var Z=null;let ue=null,Le=null,I=null,M=null,W=null,Q=0;function Ae(e,t){t=t?Object.assign({},he,t):he;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=n=>(typeof n=="function"&&(n=n(r.value)),pe(r,n));return[Fe.bind(r),s]}function Re(e){if(I===null)return e();const t=I;I=null;try{return e()}finally{I=t}}function Fe(){if(this.sources&&this.state)if(this.state===J)be(this);else{const e=M;M=null,ee(()=>te(this)),M=e}if(I){const e=this.observers?this.observers.length:0;I.sources?(I.sources.push(this),I.sourceSlots.push(e)):(I.sources=[this],I.sourceSlots=[e]),this.observers?(this.observers.push(I),this.observerSlots.push(I.sources.length-1)):(this.observers=[I],this.observerSlots=[I.sources.length-1])}return this.value}function pe(e,t,r){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&ee(()=>{for(let n=0;n<e.observers.length;n+=1){const a=e.observers[n],u=ue&&ue.running;u&&ue.disposed.has(a),(u?!a.tState:!a.state)&&(a.pure?M.push(a):W.push(a),a.observers&&xe(a)),u||(a.state=J)}if(M.length>1e6)throw M=[],new Error})),t}function be(e){if(!e.fn)return;re(e);const t=Q;Ne(e,e.value,t)}function Ne(e,t,r){let s;const n=Z,a=I;I=Z=e;try{s=e.fn(t)}catch(u){return e.pure&&(e.state=J,e.owned&&e.owned.forEach(re),e.owned=null),e.updatedAt=r+1,ve(u)}finally{I=a,Z=n}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?pe(e,s):e.value=s,e.updatedAt=r)}function ye(e){if(e.state===0)return;if(e.state===z)return te(e);if(e.suspense&&Re(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Q);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===J)be(e);else if(e.state===z){const s=M;M=null,ee(()=>te(e,t[0])),M=s}}function ee(e,t){if(M)return e();let r=!1;M=[],W?r=!0:W=[],Q++;try{const s=e();return _e(r),s}catch(s){r||(W=null),M=null,ve(s)}}function _e(e){if(M&&(we(M),M=null),e)return;const t=W;W=null,t.length&&ee(()=>Oe(t))}function we(e){for(let t=0;t<e.length;t++)ye(e[t])}function te(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const s=e.sources[r];if(s.sources){const n=s.state;n===J?s!==t&&(!s.updatedAt||s.updatedAt<Q)&&ye(s):n===z&&te(s,t)}}}function xe(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=z,r.pure?M.push(r):W.push(r),r.observers&&xe(r))}}function re(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),s=e.sourceSlots.pop(),n=r.observers;if(n&&n.length){const a=n.pop(),u=r.observerSlots.pop();s<n.length&&(a.sourceSlots[u]=s,n[s]=a,r.observerSlots[s]=u)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)re(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)re(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function $e(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function ve(e,t=Z){throw $e(e)}async function Be(e,t,r){if(!e()||e().ACTIVE===!1||e().OPTIONS[r].ENABLED===!1)return!1;function s(u,x){try{return x.some(y=>u.includes(y))}catch(C){return console.error("Error checking blacklist:",C),!1}}const n=e().BLACKLIST||[];return!(s(t(),n)&&e().BLACKLISTENABLED)}const De="0.2.1",Ue=(e,t)=>{const r=document.createElement("div");r.style.cssText="position:fixed;top:8%;left:0;background-color:rgba(0,0,0,.6);padding:2px;color:#fff;font:calc(14px + .5vw) 'Arial',sans-serif;font-weight:bold;text-transform:uppercase;letter-spacing:1px;z-index:9999;transition:all 1s;animation:slideIn 1s forwards",r.innerHTML=`<p>${e}. Retrying in..<span id="countdown">${t}</span></p>`,document.body.appendChild(r),(()=>{const a=document.getElementById("countdown");if(!a)return;let u=t;const x=setInterval(()=>{u--,a.textContent=u,u<=0&&clearInterval(x)},1e3)})();const n=document.createElement("style");n.innerHTML="@keyframes slideIn{0%{transform:translateX(-100%)}100%{transform:translateX(0)}}@keyframes slideOut{0%{transform:translateX(0)}100%{transform:translateX(100%)}}",document.head.appendChild(n),setTimeout(()=>{r.style.animation="slideOut 1s forwards",setTimeout(()=>{document.body.removeChild(r)},1e3)},t*1e3)},X=e=>document.querySelector(e),Ee=e=>document.querySelectorAll(e);function Se(){return X(".task-answers")!==null}function ke(){return Ee(".task-image .image").length===9}function Ce(){return X(".bounding-box-example")!==null}function Ke(){return X(".challenge-header")!==null&&X(".bounding-box-example")===null&&X(".task-grid")==null}function je(){const e=document.body.getBoundingClientRect();return e?.width===0||e?.height===0?!1:document.querySelector("div.check")!==null}function V(e){return new Promise(t=>setTimeout(t,e))}function Ye(e,t){return Math.floor(Math.random()*(t-e)+e)}function We(){try{const e=document.querySelector("div.check");return e&&e.style.display==="block"}catch(e){return console.error(e),!1}}async function He(e){const t=await(await fetch(e,{headers:{"if-none-match":'"CFDAD5AA0CE4A3068FF1CABAC59E4D9D"'},host:"https://domain.com"})).blob();return await Xe(t)}async function Xe(e){return new Promise(t=>{const r=new FileReader;r.readAsDataURL(e),r.addEventListener("loadend",()=>{const s=r.result.replace(/^data:image\/(png|jpeg);base64,/,"");t(s)}),r.addEventListener("error",()=>{logs&&console.log("❌ Failed to convert url to base64")})})}async function Te(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch the URL: ${e}`);const r=await t.blob();return new Promise((s,n)=>{const a=new FileReader;a.readAsDataURL(r),a.addEventListener("loadend",()=>{s(a.result.replace(/^data:image\/(png|jpeg);base64,/,""))}),a.addEventListener("error",()=>{console.error("❌ Failed to read blob as base64"),n("Failed to read blob")})})}catch(t){return console.error(`❌ Failed to convert URL to base64: ${e}`,t),null}}function Ve(){document.querySelectorAll("iframe").forEach(t=>{t.src=t.src})}async function Ge(){Ce()?(await V(200),document.querySelector(".display-language.button").click(),await V(100),document.querySelector(".language-selector .option:nth-child(23)").click()):ke()?(await V(100),document.querySelector(".language-selector .option:nth-child(23)").click()):Se()&&(document.querySelector(".display-language.button").click(),await V(200),document.querySelector(".language-selector .option:nth-child(23)").click(),await V(200))}function Je(){document.querySelector(".button-submit").click()}async function ze(){const e=navigator.userAgent;let t,r=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(r[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],`IE ${t[1]||""}`):r[1]==="Chrome"&&(t=e.match(/\b(OPR|Edge)\/(\d+)/),t!=null)?t.slice(1).join(" ").replace("OPR","Opera"):(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=e.match(/version\/(\d+)/i))!=null&&r.splice(1,1,t[1]),{version:r,platform:navigator.platform})}function Ze(e){for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}function ge(e){["mouseover","mousedown","mouseup","click"].forEach(t=>{if(e.fireEvent)e.fireEvent("on"+t);else{const r=document.createEvent("MouseEvents");r.initEvent(t,!0,!1),e.dispatchEvent(r)}})}function me(e,t,r,s,n,a,u){e.dispatchEvent(new MouseEvent(t,{bubbles:!0,clientX:r,clientY:s,buttons:n,button:a,pressure:u}))}async function Qe(e,t){const r=document.querySelector("canvas");if(e!==void 0)for(const{start:s,end:n}of e)if(Array.isArray(s)&&s.length!==0&&Array.isArray(n)&&n.length!==0){const[a,u]=s,[x,C]=n,y=r.getBoundingClientRect(),p=a+y.left,w=u+y.top,$=x+y.left,S=C+y.top;me(r,"mousedown",p,w,1,0,1),await new Promise(P=>setTimeout(P,t));const T=$-p,q=S-w,U=Math.sqrt(T**2+q**2),F=Math.round(U/6),H=T/F,G=q/F;for(let P=1;P<=F;P++){const Y=p+H*P,c=w+G*P;me(r,"mousemove",Y,c,1,0,1),await new Promise(g=>setTimeout(g,50))}me(r,"mouseup",$,S,0,0,0)}else se.$(".button-submit").click();else se.$(".button-submit").click()}async function et(e){function t(a,u,x){const C=a.getBoundingClientRect(),y=["mouseover","mousedown","mouseup","click"],p={clientX:u+C.left,clientY:x+C.top,bubbles:!0};for(let w=0;w<y.length;w++){const $=new MouseEvent(y[w],p);a.dispatchEvent($)}}const r=document.querySelector("canvas");r.addEventListener("mousedown",a=>{const u=r.getBoundingClientRect();a.clientX-u.left,a.clientY-u.top});const[s,n]=e;t(r,s,n),await se.sleep(300)}async function tt(e,t){const r=(await chrome.storage.local.get("customEndpoint")).customEndpoint;return t==="custom"?`https://${r}/${e}`:"https://api.captchasonic.com/createTask"}async function rt(e){for(const t of e){const r=[...document.querySelectorAll(".answer-text")].find(s=>s.outerText===t);ge(r),[...document.querySelectorAll(".answer-example")].some(s=>s.style.backgroundColor==="rgb(116, 116, 116)")||ge(r)}}async function st(){const e=document.querySelector("canvas");if(!e)return null;const[t,r]=[e.width,e.height],n=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,t,r,{willReadFrequently:!0});if((S=>{const T=S.data;for(let q=0;q<T.length;q+=4){const U=T[q],F=T[q+1],H=T[q+2];if(U!==F||F!==H)return!1}return!0})(n))return null;const u=parseInt(e.style.width,10),x=parseInt(e.style.height,10);if(u<=0||x<=0)return null;const C=Math.min(u/t,x/r),[y,p]=[t*C,r*C],w=document.createElement("canvas");return Object.assign(w,{width:y,height:p}),w.getContext("2d",{willReadFrequently:!0}).drawImage(e,0,0,t,r,0,0,y,p),w.toDataURL("image/jpeg").replace(/^data:image\/(png|jpeg);base64,/,"")}function nt(e){return[...document.querySelectorAll(`${e}`)].map(t=>t.style.backgroundImage.replace(/url\("|"\)/g,""))}function it(e){return Promise.all(e.map(async(t,r)=>(e[r]=await Te(t),e[r])))}async function at(e,t,r){const s=e.getBoundingClientRect(),n=s.left+window.scrollX,a=s.top+window.scrollY,u=n+t,x=a+r,C=new MouseEvent("mousedown",{clientX:n,clientY:a,bubbles:!0});e.dispatchEvent(C),await new Promise(S=>setTimeout(S,1e3));const y=20,p=(u-n)/y,w=(x-a)/y;for(let S=1;S<=y;S++){const T=n+p*S,q=a+w*S,U=new MouseEvent("mousemove",{clientX:T,clientY:q,bubbles:!0});e.dispatchEvent(U),await new Promise(F=>setTimeout(F,150))}const $=new MouseEvent("mouseup",{clientX:u,clientY:x,bubbles:!0});e.dispatchEvent($),await new Promise(S=>setTimeout(S,1e3))}async function ot(e,t,r){try{const n=await(await fetch(e,{method:"POST",headers:r,body:JSON.stringify(t)})).json();if(n.code!==200){const a=n.msg;if(a){if(n.code===1||n.code===10||n.code===18||n.code===110){chrome.runtime.sendMessage({action:a}),stop=!0;return}if(n.code===17||n.code===19||n.code===429){chrome.runtime.sendMessage({action:a}),stop=!0;return}if([4,3,12,13,14,115].includes(n.code))return document.querySelector(".geetest_refresh").click(),null}}return n}catch(s){throw console.error("Error fetching coordinates:",s),s}}async function ct(e){try{const t=await fetch("https://feedback.captchasonic.com/extFeedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const r=await t.json();return console.log("Success:",r),r}catch(t){return console.error("Error sending feedback:",t),null}}function lt(e,t){const r=document.querySelector(e);if(!r){console.warn(`Element not found: ${e}`);return}return new MutationObserver(n=>{n.forEach(a=>{if(a.attributeName==="aria-hidden"){const u=r.getAttribute("aria-hidden")==="true";window.postMessage({type:"ariaHiddenChange",value:u},"*"),typeof t=="function"&&t(u)}})}).observe(r,{attributes:!0,attributeFilter:["aria-hidden"]}),r.getAttribute("aria-hidden")==="true"}function ut(e,t){const r=`${e}_feedback`;chrome.storage.local.get(`${e}_solved`,s=>{s[`${e}_solved`],chrome.storage.local.get([r],n=>{const a=n[r]||[];if(a.some(x=>x.fail_report===!0)){const x=a.map(p=>p.data),y={type:"feedback",payload:{apiKey:t,data:x,pass:!1}};x.length>0&&chrome.runtime.sendMessage(y,p=>{chrome.storage.local.remove([r,`${e}_solved`,`${e}_feedback`,`${e}_hasRun`],()=>{})})}chrome.storage.local.remove([r,`${e}_solved`],()=>{})})})}function gt(e,t){const r=`${e}_feedback`;chrome.storage.local.get(`${e}_solved`,s=>{s[`${e}_solved`],chrome.storage.local.get([r],n=>{const a=n[r]||[];if(a.some(x=>x.pass_report===!0)){const x=a.map(p=>p.data),y={type:"feedback",payload:{apiKey:t,data:x,pass:!0}};x.length>0&&chrome.runtime.sendMessage(y,p=>{chrome.storage.local.remove([r,`${e}_solved`,`${e}_feedback`],()=>{})})}chrome.storage.local.remove([r,`${e}_solved`],()=>{})})})}async function mt(e,t=50,r=.1){return new Promise((s,n)=>{const a=atob(e),u=new Array(a.length);for(let w=0;w<a.length;w++)u[w]=a.charCodeAt(w);const x=new Uint8Array(u),C=new Blob([x],{type:"image/jpeg"}),y=URL.createObjectURL(C),p=new Image;p.onload=()=>{URL.revokeObjectURL(y);const w=document.createElement("canvas");w.width=p.width,w.height=p.height,w.getContext("2d").drawImage(p,0,0);let S=.9,T,q;do T=w.toDataURL("image/jpeg",S),q=T.length*3/4/1024,S-=.05;while(q>t&&S>=r);q>t?n(new Error(`Couldn't compress below ${t}KB. Final size: ${q.toFixed(2)}KB`)):s(T.split(",")[1])},p.onerror=()=>{URL.revokeObjectURL(y),n(new Error("Image load failed (possibly corrupt base64)"))},p.src=y})}async function dt(e){return e.replace(/^data:image\/\w+;base64,/,"")}async function ft(e){return new Promise(t=>{chrome.runtime.sendMessage({type:"GET_IMAGE_BASE64",payload:{url:e}},r=>{r?.success?t(r.data):t(null)})})}function ht(){return new Promise((e,t)=>{chrome.runtime.sendMessage({action:"getActiveTabUrl"},r=>{chrome.runtime.lastError?t(chrome.runtime.lastError):e(r.url)})})}const se={version:De,$:X,$$:Ee,isMulti:Se,isGrid:ke,isBbox:Ce,isBboxDD:Ke,isWidget:je,sleep:V,randTimer:Ye,isSolved:We,countdownNotif:Ue,getBase64FromUrl:Te,refreshIframes:Ve,getEn:Ge,skip:Je,getBrowser:ze,shuffle:Ze,fireMouseEvents:ge,getCanvas:et,handleCanvasDD:Qe,getApi:tt,clickMatchingElement:rt,sliceOG:st,updateExamples:it,getExamples:nt,solveGeetestCaptcha:at,sendCoordinatesRequest:ot,geeFetchImage:He,sendFeedback:ct,observeAriaHidden:lt,handleCaptchaFeedback:ut,handleCaptchaFeedbackOnSuccess:gt,compressPureBase64Image:mt,stripBase64Prefix:dt,fetchBase64Image:ft,getActiveTabUrl:ht},At={matches:["<all_urls>"],allFrames:!0,async main(){let e;try{e=window.top.document.location.href}catch{e=window.location.href}const[t]=Ae(e),[r,s]=Ae(await chrome.storage.local.get("settings"));if(s(r().settings),chrome.runtime.onMessage.addListener((o,i,l)=>{if(o.action==="ReCaptcha_refresh_iframes"){const m=[...document.querySelectorAll("[src*=recaptcha]")];if(m)for(const b of m){const E=b.src;b.src="about:blank",setTimeout(()=>{b.src=E},100)}for(let b=0;b<m.length;b++){const E=m[b];try{E.contentWindow.location.origin!==window.location.origin&&(E.src=E.src)}catch{E.src=E.src}}}}),!await Be(r,t,"RECAPTCHA2"))return;let u=!1,x=r().LOGENABLED==="true";async function C(o,i){const l=document.querySelectorAll(".rc-image-tile-wrapper"),m={};async function b(E,B){const L=await Promise.all(Array.from(l).map(async D=>{const A=D.querySelector("img");return A?p(A.src):null})),K=L.every(D=>D!==null);return!K&&E>0?(await new Promise(D=>setTimeout(D,B)),b(E-1,B)):K?(L.forEach((D,A)=>{m[A]=D}),m):null}switch(o){case"split_33":return b(10,1e3);case"33":case"44":return await p(i);default:return{}}}class y{static now(){return Date.now()}static currentDate(){return new Date}static sleep(i){return new Promise(l=>setTimeout(l,i))}static async randomSleep(i,l){const m=Math.floor(Math.random()*(l-i)+i);return await y.sleep(m)}}async function p(o){try{const i=await fetch(o);if(!i.ok)throw new Error(`Failed to fetch URL: ${i.status} ${i.statusText}`);const l=await i.blob();return new Promise((m,b)=>{const E=new FileReader;E.onloadend=()=>m(E.result.replace(/^data:image\/(png|jpeg);base64,/,"")),E.onerror=b,E.readAsDataURL(l)})}catch(i){throw i}}async function w(o){document.contains(o)&&["mouseover","mousedown","mouseup","click"].forEach(i=>{const l=document.createEvent("MouseEvents");l.initEvent(i,!0,!1),o.dispatchEvent(l)})}async function $(){document.getElementById("recaptcha-anchor").getAttribute("aria-disabled")!=="false"&&await w(document.querySelector("#recaptcha-anchor"))}async function S(){let o=document.querySelector("#recaptcha-anchor");return o?(o.getAttribute("aria-checked"),o.getAttribute("aria-checked")==="true"):!1}async function T(){let o=document.querySelector("#recaptcha-reload-button"),i=o?o.disabled:!0;return!!document.querySelector("#rc-imageselect")&&!i}async function q(){return!!document.querySelector(".recaptcha-checkbox")}async function U(){return document.querySelectorAll(".rc-imageselect-tile").length===9}async function F(){return document.querySelectorAll(".rc-imageselect-tile").length===16}async function H(){return document.querySelector("#recaptcha-anchor")?.classList.contains("recaptcha-checkbox-expired")}async function G(){try{const o=document.querySelectorAll("iframe");for(const i of o){const l=i.src;i.src="about:blank",await new Promise(m=>{i.onload=()=>{i.onload=null,i.src=l,m()}})}}catch{try{const i=document.querySelectorAll("iframe");for(const l of i){const m=l.src;l.src="about:blank",await new Promise(b=>setTimeout(b,50)),l.src=m}}catch{const l=document.querySelectorAll("iframe");for(const m of l)m.src=m.src}}}class P{static query(i,l){const m=document.querySelector(i);return l?m?.getAttribute(l):m}static queryAll(i){return document.querySelectorAll(i)}static isWidgetFrame(){return!!this.query(".recaptcha-checkbox")}static isImageFrame(){return!!this.query("#rc-imageselect")}static isErrorSelect(){return this.query(".rc-imageselect-error-select-more","style")!=="none"}static isErrorDynamic(){return this.query(".rc-imageselect-error-dynamic-more","style")!=="none"}static isSubmitDisabled(){return this.query("#recaptcha-verify-button","disabled")===!0}static isExpired(){return!!this.query(".recaptcha-checkbox-border")}static is11(){return this.queryAll(".rc-image-tile-11").length!==0}static isDynamic33(){return this.queryAll(".rc-imageselect-dynamic-selected").length!==0}static is33(){return this.queryAll(".rc-imageselect-tile").length===9}static is44(){return this.queryAll(".rc-imageselect-tile").length===16}static src11(){return this.query(".rc-image-tile-11","src")}static src44(){return this.query(".rc-image-tile-44","src")}static src33(){return this.query(".rc-image-tile-33","src")}static submit(){this.query("#recaptcha-verify-button")?.click()}static clicAudioBtn(){this.query("#recaptcha-audio-button")?.click()}static reload(){this.query("#recaptcha-reload-button")?.click()}static isSolved(){return this.query(".recaptcha-checkbox","aria-checked")==="true"||this.isSubmitDisabled()}static recapExpired(){return document.querySelector("#recaptcha-anchor")?.classList.contains("recaptcha-checkbox-expired")}static recapSolved(){let i=document.querySelector("#recaptcha-anchor");return i?(i.getAttribute("aria-checked"),i.getAttribute("aria-checked")==="true"):!1}static hasErrors(){return[".rc-imageselect-error-select-more",".rc-imageselect-error-dynamic-more",".rc-imageselect-error-select-something"].some(i=>{const l=this.query(i);return l&&getComputedStyle(l).display!=="none"&&l.tabIndex===0})}static isRateLimited(){return!!this.query(".rc-doscaptcha-header")}static isCellSelected(i){return i?.classList.contains("rc-imageselect-tileselected")}static getTarget(){return this.query(".rc-imageselect-desc strong, .rc-imageselect-desc-no-canonical strong","innerText")}static async refreshIframes(){try{const i=document.querySelectorAll("iframe");for(const l of i){const m=l.src;l.src="about:blank",await new Promise(b=>{l.onload=()=>{l.onload=null,l.src=m,b()}})}}catch{try{const l=document.querySelectorAll("iframe");for(const m of l){const b=m.src;m.src="about:blank",await new Promise(E=>setTimeout(E,50)),m.src=b}}catch{const m=document.querySelectorAll("iframe");for(const b of m)b.src=b.src}}}}let Y=null,c=null;async function g(){const o=P.is44()?"44":await U()?"33":await is11()?"split_33":null;if(!o)return;const[i,l,m]=await f(),b=o==="split_33"?await C(m,l):{0:await C(m,l)},E=JSON.stringify(b);if(E){if(E===Y)return"skip";Y=E,N(b,m,i,o)}}async function f(){const o=await F()?"44":await U()?"33":null;if(!o)return;const i=document.querySelector(".rc-imageselect-instructions strong")?.innerText;if(!i)return;const l=document.querySelector(`.rc-image-tile-${o}`)?.src;if(l)return[i,l,o]}const h=new Map;for(;u===!1&&r().APIKEY&&r().ACTIVE===!0&&r().OPTIONS.RECAPTCHA2.ENABLED===!0&&r().OPTIONS.RECAPTCHA2.METHOD=="RECOGNITION";)if(await y.sleep(2e3),await q()&&r().OPTIONS.RECAPTCHA2.AUTOOPEN===!0&&!r().BLACKLIST.includes(t())&&r()?.AUTOOPENENABLED)if(await S()){u=!0;return}else await $();else if(await T()){const o=await F()?"44":await U()?"33":null;(o==="33"||o==="44")&&await T()&&!await S()&&r()?.OPTIONS?.RECAPTCHA2?.AUTOSOLVE===!0&&(await g(),await S()==!0&&(u=!0))}else if(await H())await G(),u=!1;else if(await S()){u=!0;return}async function k(){await w(document.querySelector("#recaptcha-verify-button"))}async function O(o,i,l){const m="https://api.captchasonic.com/createTask",b={"Content-Type":"application/json",APIKEY:r().APIKEY};if(r().LOGENABLED&&!o)return;const E=Object.values(o),B=JSON.stringify({target:i,type:l,img:E}),L=10;if(h.has(B))return h.get(B);async function K(A,_=0){return new Promise((ce,Ie)=>{const Tt={type:"networkRequest",payload:{url:m,method:"POST",headers:b,body:JSON.stringify({apiKey:r().APIKEY,source:"chrome",version:se.version,task:{type:"ReCaptchaV2Image",questionType:l,queries:A,question:i,websiteURL:t(),metadata:{pageURL:t(),title:"reCAPTCHA"}}})}};chrome.runtime.sendMessage(Tt,le=>{if(!le)return Ie(new Error("No response received from chrome.runtime.sendMessage."));le.success?ce(le.data):Ie(new Error(le.error||"Request failed"))})}).catch(async ce=>{if(_>=L)throw new Error("Max retries reached. Request failed.");return await v(2e3),K(A,_+1)})}const D=K(E).then(A=>{if(A.code!==200){`${A.retryAfterSec}`,`${A.retryAfterSec}`,`${A.retryAfterSec}`;const _=A.msg;if(_){if([1,10,18,110].includes(A.code)){chrome.runtime.sendMessage({action:_}),u=!0;return}else if([17,19,429].includes(A.code)){chrome.runtime.sendMessage({action:_}),u=!0;return}else if([4,3,12,13,14,115].includes(A.code))return k()}}return A}).finally(()=>{h.delete(B)});return h.set(B,D),D}async function N(o,i,l,m,b){const E=document.querySelector(".rc-imageselect-desc-no-canonical strong")?.textContent;if(!o)return;const B=await O(o,l||E,i),L=document.querySelectorAll(".rc-image-tile-wrapper");if(!L)return;const K=await R(B);if(K){for(const D of K)await w(L[D]),await v(100);if(P.isDynamic33()===!1&&(j("dynamic",P.isDynamic33()),await v(1e3),k(),P.isErrorSelect()||P.isErrorDynamic()))return j("error found, skipping"),P.reload();if(m)return d(l,K);await v(1e3),k()}}async function d(o,i){for(;!u&&document.querySelectorAll(".rc-image-tile-11").length<i.length;)await v(150);const l=document.querySelectorAll(".rc-image-tile-wrapper img"),m=Array.from(l).map((A,_)=>A.classList.contains("rc-image-tile-11")?{index:_,src:A.src}:null).filter(A=>A!==null),b={};if(await Promise.all(m.map(async({index:A,src:_})=>{b[A]=await p(_)})),!i)return;const E=JSON.stringify(b);if(E===JSON.stringify(c)||E==="{}")return;const B=await O(b,o,"split_33");if(!B)return;const L=await R(B);if(!L)return;const K=L.every(A=>typeof A=="number");if(L.every(A=>typeof A=="boolean")&&!L.some(_=>_===!0))return await v(1e3),k(),P.isErrorSelect()||P.isErrorDynamic()?P.reload():void 0;if(K&&L.length==0)return await v(1e3),k(),P.isErrorSelect()||P.isErrorDynamic()?P.reload():void 0;for(const A of L)if(Number.isInteger(A)&&(await w(l[A]),await v(100)),typeof A=="boolean"){const _=L.indexOf(!0),ce=Object.keys(b)[_];await w(l[ce]),await v(100)}await v(1e3),d(o,L)}async function R(o){if(o!==void 0&&(o.answers||o.answers))return o.answers}function v(o){return new Promise(i=>setTimeout(i,o))}function j(){r().LOGENABLED}}};function pt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ne={exports:{}},bt=ne.exports,qe;function yt(){return qe||(qe=1,function(e,t){(function(r,s){s(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:bt,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const s="The message port closed before a response was received.",n=a=>{const u={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(u).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class x extends WeakMap{constructor(g,f=void 0){super(f),this.createItem=g}get(g){return this.has(g)||this.set(g,this.createItem(g)),super.get(g)}}const C=c=>c&&typeof c=="object"&&typeof c.then=="function",y=(c,g)=>(...f)=>{a.runtime.lastError?c.reject(new Error(a.runtime.lastError.message)):g.singleCallbackArg||f.length<=1&&g.singleCallbackArg!==!1?c.resolve(f[0]):c.resolve(f)},p=c=>c==1?"argument":"arguments",w=(c,g)=>function(h,...k){if(k.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${p(g.minArgs)} for ${c}(), got ${k.length}`);if(k.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${p(g.maxArgs)} for ${c}(), got ${k.length}`);return new Promise((O,N)=>{if(g.fallbackToNoCallback)try{h[c](...k,y({resolve:O,reject:N},g))}catch(d){console.warn(`${c} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,d),h[c](...k),g.fallbackToNoCallback=!1,g.noCallback=!0,O()}else g.noCallback?(h[c](...k),O()):h[c](...k,y({resolve:O,reject:N},g))})},$=(c,g,f)=>new Proxy(g,{apply(h,k,O){return f.call(k,c,...O)}});let S=Function.call.bind(Object.prototype.hasOwnProperty);const T=(c,g={},f={})=>{let h=Object.create(null),k={has(N,d){return d in c||d in h},get(N,d,R){if(d in h)return h[d];if(!(d in c))return;let v=c[d];if(typeof v=="function")if(typeof g[d]=="function")v=$(c,c[d],g[d]);else if(S(f,d)){let j=w(d,f[d]);v=$(c,c[d],j)}else v=v.bind(c);else if(typeof v=="object"&&v!==null&&(S(g,d)||S(f,d)))v=T(v,g[d],f[d]);else if(S(f,"*"))v=T(v,g[d],f["*"]);else return Object.defineProperty(h,d,{configurable:!0,enumerable:!0,get(){return c[d]},set(j){c[d]=j}}),v;return h[d]=v,v},set(N,d,R,v){return d in h?h[d]=R:c[d]=R,!0},defineProperty(N,d,R){return Reflect.defineProperty(h,d,R)},deleteProperty(N,d){return Reflect.deleteProperty(h,d)}},O=Object.create(c);return new Proxy(O,k)},q=c=>({addListener(g,f,...h){g.addListener(c.get(f),...h)},hasListener(g,f){return g.hasListener(c.get(f))},removeListener(g,f){g.removeListener(c.get(f))}}),U=new x(c=>typeof c!="function"?c:function(f){const h=T(f,{},{getContent:{minArgs:0,maxArgs:0}});c(h)}),F=new x(c=>typeof c!="function"?c:function(f,h,k){let O=!1,N,d=new Promise(o=>{N=function(i){O=!0,o(i)}}),R;try{R=c(f,h,N)}catch(o){R=Promise.reject(o)}const v=R!==!0&&C(R);if(R!==!0&&!v&&!O)return!1;const j=o=>{o.then(i=>{k(i)},i=>{let l;i&&(i instanceof Error||typeof i.message=="string")?l=i.message:l="An unexpected error occurred",k({__mozWebExtensionPolyfillReject__:!0,message:l})}).catch(i=>{console.error("Failed to send onMessage rejected reply",i)})};return j(v?R:d),!0}),H=({reject:c,resolve:g},f)=>{a.runtime.lastError?a.runtime.lastError.message===s?g():c(new Error(a.runtime.lastError.message)):f&&f.__mozWebExtensionPolyfillReject__?c(new Error(f.message)):g(f)},G=(c,g,f,...h)=>{if(h.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${p(g.minArgs)} for ${c}(), got ${h.length}`);if(h.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${p(g.maxArgs)} for ${c}(), got ${h.length}`);return new Promise((k,O)=>{const N=H.bind(null,{resolve:k,reject:O});h.push(N),f.sendMessage(...h)})},P={devtools:{network:{onRequestFinished:q(U)}},runtime:{onMessage:q(F),onMessageExternal:q(F),sendMessage:G.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:G.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},Y={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return u.privacy={network:{"*":Y},services:{"*":Y},websites:{"*":Y}},T(a,P,u)};r.exports=n(chrome)}})}(ne)),ne.exports}var wt=yt();const Pe=pt(wt);function ie(e,...t){}const xt={debug:(...e)=>ie(console.debug,...e),log:(...e)=>ie(console.log,...e),warn:(...e)=>ie(console.warn,...e),error:(...e)=>ie(console.error,...e)};class de extends Event{constructor(t,r){super(de.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=r}static EVENT_NAME=fe("wxt:locationchange")}function fe(e){return`${Pe?.runtime?.id}:reCaptcha:${e}`}function vt(e){let t,r;return{run(){t==null&&(r=new URL(location.href),t=e.setInterval(()=>{let s=new URL(location.href);s.href!==r.href&&(window.dispatchEvent(new de(s,r)),r=s)},1e3))}}}class ae{constructor(t,r){this.contentScriptName=t,this.options=r,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=fe("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=vt(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return Pe.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,r){const s=setInterval(()=>{this.isValid&&t()},r);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(t,r){const s=setTimeout(()=>{this.isValid&&t()},r);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(t){const r=requestAnimationFrame((...s)=>{this.isValid&&t(...s)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(t,r){const s=requestIdleCallback((...n)=>{this.signal.aborted||t(...n)},r);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(t,r,s,n){r==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),t.addEventListener?.(r.startsWith("wxt:")?fe(r):r,s,{...n,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),xt.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:ae.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(t){const r=t.data?.type===ae.SCRIPT_STARTED_MESSAGE_TYPE,s=t.data?.contentScriptName===this.contentScriptName,n=!this.receivedMessageIds.has(t.data?.messageId);return r&&s&&n}listenForNewerScripts(t){let r=!0;const s=n=>{if(this.verifyScriptStartedEvent(n)){this.receivedMessageIds.add(n.data.messageId);const a=r;if(r=!1,a&&t?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))}}const Et=Symbol("null");let St=0;class kt extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[t]=arguments;if(t!=null){if(typeof t[Symbol.iterator]!="function")throw new TypeError(typeof t+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[r,s]of t)this.set(r,s)}}_getPublicKeys(t,r=!1){if(!Array.isArray(t))throw new TypeError("The keys parameter must be an array");const s=this._getPrivateKey(t,r);let n;return s&&this._publicKeys.has(s)?n=this._publicKeys.get(s):r&&(n=[...t],this._publicKeys.set(s,n)),{privateKey:s,publicKey:n}}_getPrivateKey(t,r=!1){const s=[];for(let n of t){n===null&&(n=Et);const a=typeof n=="object"||typeof n=="function"?"_objectHashes":typeof n=="symbol"?"_symbolHashes":!1;if(!a)s.push(n);else if(this[a].has(n))s.push(this[a].get(n));else if(r){const u=`@@mkm-ref-${St++}@@`;this[a].set(n,u),s.push(u)}else return!1}return JSON.stringify(s)}set(t,r){const{publicKey:s}=this._getPublicKeys(t,!0);return super.set(s,r)}get(t){const{publicKey:r}=this._getPublicKeys(t);return super.get(r)}has(t){const{publicKey:r}=this._getPublicKeys(t);return super.has(r)}delete(t){const{publicKey:r,privateKey:s}=this._getPublicKeys(t);return!!(r&&super.delete(r)&&this._publicKeys.delete(s))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new kt;function Mt(){}function oe(e,...t){}const Ct={debug:(...e)=>oe(console.debug,...e),log:(...e)=>oe(console.log,...e),warn:(...e)=>oe(console.warn,...e),error:(...e)=>oe(console.error,...e)};return(async()=>{try{const{main:e,...t}=At,r=new ae("reCaptcha",t);return await e(r)}catch(e){throw Ct.error('The content script "reCaptcha" crashed on startup!',e),e}})()}();
recaptcha;
