var trunstile=function(){"use strict";function Pe(e){return e}const ne=!1,D={equals:(e,s)=>e===s};let ie=z;const v=1,E=2;var T=null;let $=null,ae=null,u=null,f=null,w=null,k=0;function W(e,s){s=s?Object.assign({},D,s):D;const r={value:e,observers:null,observerSlots:null,comparator:s.equals||void 0},t=a=>(typeof a=="function"&&(a=a(r.value)),V(r,a));return[le.bind(r),t]}function oe(e){if(u===null)return e();const s=u;u=null;try{return e()}finally{u=s}}function le(){if(this.sources&&this.state)if(this.state===v)H(this);else{const e=f;f=null,C(()=>P(this)),f=e}if(u){const e=this.observers?this.observers.length:0;u.sources?(u.sources.push(this),u.sourceSlots.push(e)):(u.sources=[this],u.sourceSlots=[e]),this.observers?(this.observers.push(u),this.observerSlots.push(u.sources.length-1)):(this.observers=[u],this.observerSlots=[u.sources.length-1])}return this.value}function V(e,s,r){let t=e.value;return(!e.comparator||!e.comparator(t,s))&&(e.value=s,e.observers&&e.observers.length&&C(()=>{for(let a=0;a<e.observers.length;a+=1){const g=e.observers[a],h=$&&$.running;h&&$.disposed.has(g),(h?!g.tState:!g.state)&&(g.pure?f.push(g):w.push(g),g.observers&&Z(g)),h||(g.state=v)}if(f.length>1e6)throw f=[],new Error})),s}function H(e){if(!e.fn)return;_(e);const s=k;ge(e,e.value,s)}function ge(e,s,r){let t;const a=T,g=u;u=T=e;try{t=e.fn(s)}catch(h){return e.pure&&(e.state=v,e.owned&&e.owned.forEach(_),e.owned=null),e.updatedAt=r+1,Y(h)}finally{u=g,T=a}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?V(e,t):e.value=t,e.updatedAt=r)}function G(e){if(e.state===0)return;if(e.state===E)return P(e);if(e.suspense&&oe(e.suspense.inFallback))return e.suspense.effects.push(e);const s=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<k);)e.state&&s.push(e);for(let r=s.length-1;r>=0;r--)if(e=s[r],e.state===v)H(e);else if(e.state===E){const t=f;f=null,C(()=>P(e,s[0])),f=t}}function C(e,s){if(f)return e();let r=!1;f=[],w?r=!0:w=[],k++;try{const t=e();return me(r),t}catch(t){r||(w=null),f=null,Y(t)}}function me(e){if(f&&(z(f),f=null),e)return;const s=w;w=null,s.length&&C(()=>ie(s))}function z(e){for(let s=0;s<e.length;s++)G(e[s])}function P(e,s){e.state=0;for(let r=0;r<e.sources.length;r+=1){const t=e.sources[r];if(t.sources){const a=t.state;a===v?t!==s&&(!t.updatedAt||t.updatedAt<k)&&G(t):a===E&&P(t,s)}}}function Z(e){for(let s=0;s<e.observers.length;s+=1){const r=e.observers[s];r.state||(r.state=E,r.pure?f.push(r):w.push(r),r.observers&&Z(r))}}function _(e){let s;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),t=e.sourceSlots.pop(),a=r.observers;if(a&&a.length){const g=a.pop(),h=r.observerSlots.pop();t<a.length&&(g.sourceSlots[h]=t,a[t]=g,r.observerSlots[t]=h)}}if(e.tOwned){for(s=e.tOwned.length-1;s>=0;s--)_(e.tOwned[s]);delete e.tOwned}if(e.owned){for(s=e.owned.length-1;s>=0;s--)_(e.owned[s]);e.owned=null}if(e.cleanups){for(s=e.cleanups.length-1;s>=0;s--)e.cleanups[s]();e.cleanups=null}e.state=0}function ce(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Y(e,s=T){throw ce(e)}const ue={matches:["<all_urls>"],allFrames:!0,async main(){let e;try{e=window.top.document.location.href}catch{e=window.location.href}W(e);const[s,r]=W(await chrome.storage.local.get("settings"));r(s().settings),!window.cloudTrun&&(window.cloudTrun=!0)}};function Ae(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var M={exports:{}},fe=M.exports,J;function he(){return J||(J=1,function(e,s){(function(r,t){t(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:fe,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const t="The message port closed before a response was received.",a=g=>{const h={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(h).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class X extends WeakMap{constructor(i,l=void 0){super(l),this.createItem=i}get(i){return this.has(i)||this.set(i,this.createItem(i)),super.get(i)}}const Se=n=>n&&typeof n=="object"&&typeof n.then=="function",ee=(n,i)=>(...l)=>{g.runtime.lastError?n.reject(new Error(g.runtime.lastError.message)):i.singleCallbackArg||l.length<=1&&i.singleCallbackArg!==!1?n.resolve(l[0]):n.resolve(l)},R=n=>n==1?"argument":"arguments",Ee=(n,i)=>function(m,...A){if(A.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${R(i.minArgs)} for ${n}(), got ${A.length}`);if(A.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${R(i.maxArgs)} for ${n}(), got ${A.length}`);return new Promise((x,d)=>{if(i.fallbackToNoCallback)try{m[n](...A,ee({resolve:x,reject:d},i))}catch(o){console.warn(`${n} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),m[n](...A),i.fallbackToNoCallback=!1,i.noCallback=!0,x()}else i.noCallback?(m[n](...A),x()):m[n](...A,ee({resolve:x,reject:d},i))})},se=(n,i,l)=>new Proxy(i,{apply(m,A,x){return l.call(A,n,...x)}});let K=Function.call.bind(Object.prototype.hasOwnProperty);const L=(n,i={},l={})=>{let m=Object.create(null),A={has(d,o){return o in n||o in m},get(d,o,p){if(o in m)return m[o];if(!(o in n))return;let c=n[o];if(typeof c=="function")if(typeof i[o]=="function")c=se(n,n[o],i[o]);else if(K(l,o)){let y=Ee(o,l[o]);c=se(n,n[o],y)}else c=c.bind(n);else if(typeof c=="object"&&c!==null&&(K(i,o)||K(l,o)))c=L(c,i[o],l[o]);else if(K(l,"*"))c=L(c,i[o],l["*"]);else return Object.defineProperty(m,o,{configurable:!0,enumerable:!0,get(){return n[o]},set(y){n[o]=y}}),c;return m[o]=c,c},set(d,o,p,c){return o in m?m[o]=p:n[o]=p,!0},defineProperty(d,o,p){return Reflect.defineProperty(m,o,p)},deleteProperty(d,o){return Reflect.deleteProperty(m,o)}},x=Object.create(n);return new Proxy(x,A)},q=n=>({addListener(i,l,...m){i.addListener(n.get(l),...m)},hasListener(i,l){return i.hasListener(n.get(l))},removeListener(i,l){i.removeListener(n.get(l))}}),Te=new X(n=>typeof n!="function"?n:function(l){const m=L(l,{},{getContent:{minArgs:0,maxArgs:0}});n(m)}),re=new X(n=>typeof n!="function"?n:function(l,m,A){let x=!1,d,o=new Promise(S=>{d=function(b){x=!0,S(b)}}),p;try{p=n(l,m,d)}catch(S){p=Promise.reject(S)}const c=p!==!0&&Se(p);if(p!==!0&&!c&&!x)return!1;const y=S=>{S.then(b=>{A(b)},b=>{let B;b&&(b instanceof Error||typeof b.message=="string")?B=b.message:B="An unexpected error occurred",A({__mozWebExtensionPolyfillReject__:!0,message:B})}).catch(b=>{console.error("Failed to send onMessage rejected reply",b)})};return y(c?p:o),!0}),ke=({reject:n,resolve:i},l)=>{g.runtime.lastError?g.runtime.lastError.message===t?i():n(new Error(g.runtime.lastError.message)):l&&l.__mozWebExtensionPolyfillReject__?n(new Error(l.message)):i(l)},te=(n,i,l,...m)=>{if(m.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${R(i.minArgs)} for ${n}(), got ${m.length}`);if(m.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${R(i.maxArgs)} for ${n}(), got ${m.length}`);return new Promise((A,x)=>{const d=ke.bind(null,{resolve:A,reject:x});m.push(d),l.sendMessage(...m)})},Ce={devtools:{network:{onRequestFinished:q(Te)}},runtime:{onMessage:q(re),onMessageExternal:q(re),sendMessage:te.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:te.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},j={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return h.privacy={network:{"*":j},services:{"*":j},websites:{"*":j}},L(g,Ce,h)};r.exports=a(chrome)}})}(M)),M.exports}var xe=he();const Q=Ae(xe);function N(e,...s){}const de={debug:(...e)=>N(console.debug,...e),log:(...e)=>N(console.log,...e),warn:(...e)=>N(console.warn,...e),error:(...e)=>N(console.error,...e)};class O extends Event{constructor(s,r){super(O.EVENT_NAME,{}),this.newUrl=s,this.oldUrl=r}static EVENT_NAME=U("wxt:locationchange")}function U(e){return`${Q?.runtime?.id}:trunstile:${e}`}function pe(e){let s,r;return{run(){s==null&&(r=new URL(location.href),s=e.setInterval(()=>{let t=new URL(location.href);t.href!==r.href&&(window.dispatchEvent(new O(t,r)),r=t)},1e3))}}}class I{constructor(s,r){this.contentScriptName=s,this.options=r,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=U("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=pe(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(s){return this.abortController.abort(s)}get isInvalid(){return Q.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(s){return this.signal.addEventListener("abort",s),()=>this.signal.removeEventListener("abort",s)}block(){return new Promise(()=>{})}setInterval(s,r){const t=setInterval(()=>{this.isValid&&s()},r);return this.onInvalidated(()=>clearInterval(t)),t}setTimeout(s,r){const t=setTimeout(()=>{this.isValid&&s()},r);return this.onInvalidated(()=>clearTimeout(t)),t}requestAnimationFrame(s){const r=requestAnimationFrame((...t)=>{this.isValid&&s(...t)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(s,r){const t=requestIdleCallback((...a)=>{this.signal.aborted||s(...a)},r);return this.onInvalidated(()=>cancelIdleCallback(t)),t}addEventListener(s,r,t,a){r==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),s.addEventListener?.(r.startsWith("wxt:")?U(r):r,t,{...a,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),de.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:I.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(s){const r=s.data?.type===I.SCRIPT_STARTED_MESSAGE_TYPE,t=s.data?.contentScriptName===this.contentScriptName,a=!this.receivedMessageIds.has(s.data?.messageId);return r&&t&&a}listenForNewerScripts(s){let r=!0;const t=a=>{if(this.verifyScriptStartedEvent(a)){this.receivedMessageIds.add(a.data.messageId);const g=r;if(r=!1,g&&s?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",t),this.onInvalidated(()=>removeEventListener("message",t))}}const be=Symbol("null");let we=0;class ye extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[s]=arguments;if(s!=null){if(typeof s[Symbol.iterator]!="function")throw new TypeError(typeof s+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[r,t]of s)this.set(r,t)}}_getPublicKeys(s,r=!1){if(!Array.isArray(s))throw new TypeError("The keys parameter must be an array");const t=this._getPrivateKey(s,r);let a;return t&&this._publicKeys.has(t)?a=this._publicKeys.get(t):r&&(a=[...s],this._publicKeys.set(t,a)),{privateKey:t,publicKey:a}}_getPrivateKey(s,r=!1){const t=[];for(let a of s){a===null&&(a=be);const g=typeof a=="object"||typeof a=="function"?"_objectHashes":typeof a=="symbol"?"_symbolHashes":!1;if(!g)t.push(a);else if(this[g].has(a))t.push(this[g].get(a));else if(r){const h=`@@mkm-ref-${we++}@@`;this[g].set(a,h),t.push(h)}else return!1}return JSON.stringify(t)}set(s,r){const{publicKey:t}=this._getPublicKeys(s,!0);return super.set(t,r)}get(s){const{publicKey:r}=this._getPublicKeys(s);return super.get(r)}has(s){const{publicKey:r}=this._getPublicKeys(s);return super.has(r)}delete(s){const{publicKey:r,privateKey:t}=this._getPublicKeys(s);return!!(r&&super.delete(r)&&this._publicKeys.delete(t))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new ye;function Ne(){}function F(e,...s){}const ve={debug:(...e)=>F(console.debug,...e),log:(...e)=>F(console.log,...e),warn:(...e)=>F(console.warn,...e),error:(...e)=>F(console.error,...e)};return(async()=>{try{const{main:e,...s}=ue,r=new I("trunstile",s);return await e(r)}catch(e){throw ve.error('The content script "trunstile" crashed on startup!',e),e}})()}();
trunstile;
