var mtcaptcha=function(){"use strict";function wt(e){return e}const Ee=!1,ie={equals:(e,t)=>e===t};let ke=me;const Y=1,X=2;var H=null;let re=null,Se=null,P=null,I=null,$=null,V=0;function ce(e,t){t=t?Object.assign({},ie,t):ie;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=n=>(typeof n=="function"&&(n=n(r.value)),le(r,n));return[Te.bind(r),s]}function Ce(e){if(P===null)return e();const t=P;P=null;try{return e()}finally{P=t}}function Te(){if(this.sources&&this.state)if(this.state===Y)ue(this);else{const e=I;I=null,G(()=>z(this)),I=e}if(P){const e=this.observers?this.observers.length:0;P.sources?(P.sources.push(this),P.sourceSlots.push(e)):(P.sources=[this],P.sourceSlots=[e]),this.observers?(this.observers.push(P),this.observerSlots.push(P.sources.length-1)):(this.observers=[P],this.observerSlots=[P.sources.length-1])}return this.value}function le(e,t,r){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&G(()=>{for(let n=0;n<e.observers.length;n+=1){const a=e.observers[n],u=re&&re.running;u&&re.disposed.has(a),(u?!a.tState:!a.state)&&(a.pure?I.push(a):$.push(a),a.observers&&de(a)),u||(a.state=Y)}if(I.length>1e6)throw I=[],new Error})),t}function ue(e){if(!e.fn)return;J(e);const t=V;Me(e,e.value,t)}function Me(e,t,r){let s;const n=H,a=P;P=H=e;try{s=e.fn(t)}catch(u){return e.pure&&(e.state=Y,e.owned&&e.owned.forEach(J),e.owned=null),e.updatedAt=r+1,fe(u)}finally{P=a,H=n}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?le(e,s):e.value=s,e.updatedAt=r)}function ge(e){if(e.state===0)return;if(e.state===X)return z(e);if(e.suspense&&Ce(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<V);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===Y)ue(e);else if(e.state===X){const s=I;I=null,G(()=>z(e,t[0])),I=s}}function G(e,t){if(I)return e();let r=!1;I=[],$?r=!0:$=[],V++;try{const s=e();return Pe(r),s}catch(s){r||($=null),I=null,fe(s)}}function Pe(e){if(I&&(me(I),I=null),e)return;const t=$;$=null,t.length&&G(()=>ke(t))}function me(e){for(let t=0;t<e.length;t++)ge(e[t])}function z(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const s=e.sources[r];if(s.sources){const n=s.state;n===Y?s!==t&&(!s.updatedAt||s.updatedAt<V)&&ge(s):n===X&&z(s,t)}}}function de(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=X,r.pure?I.push(r):$.push(r),r.observers&&de(r))}}function J(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),s=e.sourceSlots.pop(),n=r.observers;if(n&&n.length){const a=n.pop(),u=r.observerSlots.pop();s<n.length&&(a.sourceSlots[u]=s,n[s]=a,r.observerSlots[s]=u)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)J(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)J(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Ie(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function fe(e,t=H){throw Ie(e)}globalThis.browser?.runtime?.id==null?globalThis.chrome:globalThis.browser;const Oe="0.2.1",Le=(e,t)=>{const r=document.createElement("div");r.style.cssText="position:fixed;top:8%;left:0;background-color:rgba(0,0,0,.6);padding:2px;color:#fff;font:calc(14px + .5vw) 'Arial',sans-serif;font-weight:bold;text-transform:uppercase;letter-spacing:1px;z-index:9999;transition:all 1s;animation:slideIn 1s forwards",r.innerHTML=`<p>${e}. Retrying in..<span id="countdown">${t}</span></p>`,document.body.appendChild(r),(()=>{const a=document.getElementById("countdown");if(!a)return;let u=t;const h=setInterval(()=>{u--,a.textContent=u,u<=0&&clearInterval(h)},1e3)})();const n=document.createElement("style");n.innerHTML="@keyframes slideIn{0%{transform:translateX(-100%)}100%{transform:translateX(0)}}@keyframes slideOut{0%{transform:translateX(0)}100%{transform:translateX(100%)}}",document.head.appendChild(n),setTimeout(()=>{r.style.animation="slideOut 1s forwards",setTimeout(()=>{document.body.removeChild(r)},1e3)},t*1e3)},j=e=>document.querySelector(e),he=e=>document.querySelectorAll(e);function Ae(){return j(".task-answers")!==null}function pe(){return he(".task-image .image").length===9}function be(){return j(".bounding-box-example")!==null}function Re(){return j(".challenge-header")!==null&&j(".bounding-box-example")===null&&j(".task-grid")==null}function _e(){const e=document.body.getBoundingClientRect();return e?.width===0||e?.height===0?!1:document.querySelector("div.check")!==null}function K(e){return new Promise(t=>setTimeout(t,e))}function Fe(e,t){return Math.floor(Math.random()*(t-e)+e)}function qe(){try{const e=document.querySelector("div.check");return e&&e.style.display==="block"}catch(e){return console.error(e),!1}}async function Ne(e){const t=await(await fetch(e,{headers:{"if-none-match":'"CFDAD5AA0CE4A3068FF1CABAC59E4D9D"'},host:"https://domain.com"})).blob();return await $e(t)}async function $e(e){return new Promise(t=>{const r=new FileReader;r.readAsDataURL(e),r.addEventListener("loadend",()=>{const s=r.result.replace(/^data:image\/(png|jpeg);base64,/,"");t(s)}),r.addEventListener("error",()=>{logs&&console.log("❌ Failed to convert url to base64")})})}async function we(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch the URL: ${e}`);const r=await t.blob();return new Promise((s,n)=>{const a=new FileReader;a.readAsDataURL(r),a.addEventListener("loadend",()=>{s(a.result.replace(/^data:image\/(png|jpeg);base64,/,""))}),a.addEventListener("error",()=>{console.error("❌ Failed to read blob as base64"),n("Failed to read blob")})})}catch(t){return console.error(`❌ Failed to convert URL to base64: ${e}`,t),null}}function Ue(){document.querySelectorAll("iframe").forEach(t=>{t.src=t.src})}async function Be(){be()?(await K(200),document.querySelector(".display-language.button").click(),await K(100),document.querySelector(".language-selector .option:nth-child(23)").click()):pe()?(await K(100),document.querySelector(".language-selector .option:nth-child(23)").click()):Ae()&&(document.querySelector(".display-language.button").click(),await K(200),document.querySelector(".language-selector .option:nth-child(23)").click(),await K(200))}function je(){document.querySelector(".button-submit").click()}async function Ke(){const e=navigator.userAgent;let t,r=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(r[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],`IE ${t[1]||""}`):r[1]==="Chrome"&&(t=e.match(/\b(OPR|Edge)\/(\d+)/),t!=null)?t.slice(1).join(" ").replace("OPR","Opera"):(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=e.match(/version\/(\d+)/i))!=null&&r.splice(1,1,t[1]),{version:r,platform:navigator.platform})}function De(e){for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}function se(e){["mouseover","mousedown","mouseup","click"].forEach(t=>{if(e.fireEvent)e.fireEvent("on"+t);else{const r=document.createEvent("MouseEvents");r.initEvent(t,!0,!1),e.dispatchEvent(r)}})}function ne(e,t,r,s,n,a,u){e.dispatchEvent(new MouseEvent(t,{bubbles:!0,clientX:r,clientY:s,buttons:n,button:a,pressure:u}))}async function Ye(e,t){const r=document.querySelector("canvas");if(e!==void 0)for(const{start:s,end:n}of e)if(Array.isArray(s)&&s.length!==0&&Array.isArray(n)&&n.length!==0){const[a,u]=s,[h,A]=n,w=r.getBoundingClientRect(),p=a+w.left,d=u+w.top,L=h+w.left,y=A+w.top;ne(r,"mousedown",p,d,1,0,1),await new Promise(_=>setTimeout(_,t));const k=L-p,x=y-d,q=Math.sqrt(k**2+x**2),O=Math.round(q/6),U=k/O,D=x/O;for(let _=1;_<=O;_++){const B=p+U*_,c=d+D*_;ne(r,"mousemove",B,c,1,0,1),await new Promise(l=>setTimeout(l,50))}ne(r,"mouseup",L,y,0,0,0)}else R.$(".button-submit").click();else R.$(".button-submit").click()}async function We(e){function t(a,u,h){const A=a.getBoundingClientRect(),w=["mouseover","mousedown","mouseup","click"],p={clientX:u+A.left,clientY:h+A.top,bubbles:!0};for(let d=0;d<w.length;d++){const L=new MouseEvent(w[d],p);a.dispatchEvent(L)}}const r=document.querySelector("canvas");r.addEventListener("mousedown",a=>{const u=r.getBoundingClientRect();a.clientX-u.left,a.clientY-u.top});const[s,n]=e;t(r,s,n),await R.sleep(300)}async function Xe(e,t){const r=(await chrome.storage.local.get("customEndpoint")).customEndpoint;return t==="custom"?`https://${r}/${e}`:"https://api.captchasonic.com/createTask"}async function He(e){for(const t of e){const r=[...document.querySelectorAll(".answer-text")].find(s=>s.outerText===t);se(r),[...document.querySelectorAll(".answer-example")].some(s=>s.style.backgroundColor==="rgb(116, 116, 116)")||se(r)}}async function Ve(){const e=document.querySelector("canvas");if(!e)return null;const[t,r]=[e.width,e.height],n=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,t,r,{willReadFrequently:!0});if((y=>{const k=y.data;for(let x=0;x<k.length;x+=4){const q=k[x],O=k[x+1],U=k[x+2];if(q!==O||O!==U)return!1}return!0})(n))return null;const u=parseInt(e.style.width,10),h=parseInt(e.style.height,10);if(u<=0||h<=0)return null;const A=Math.min(u/t,h/r),[w,p]=[t*A,r*A],d=document.createElement("canvas");return Object.assign(d,{width:w,height:p}),d.getContext("2d",{willReadFrequently:!0}).drawImage(e,0,0,t,r,0,0,w,p),d.toDataURL("image/jpeg").replace(/^data:image\/(png|jpeg);base64,/,"")}function Ge(e){return[...document.querySelectorAll(`${e}`)].map(t=>t.style.backgroundImage.replace(/url\("|"\)/g,""))}function ze(e){return Promise.all(e.map(async(t,r)=>(e[r]=await we(t),e[r])))}async function Je(e,t,r){const s=e.getBoundingClientRect(),n=s.left+window.scrollX,a=s.top+window.scrollY,u=n+t,h=a+r,A=new MouseEvent("mousedown",{clientX:n,clientY:a,bubbles:!0});e.dispatchEvent(A),await new Promise(y=>setTimeout(y,1e3));const w=20,p=(u-n)/w,d=(h-a)/w;for(let y=1;y<=w;y++){const k=n+p*y,x=a+d*y,q=new MouseEvent("mousemove",{clientX:k,clientY:x,bubbles:!0});e.dispatchEvent(q),await new Promise(O=>setTimeout(O,150))}const L=new MouseEvent("mouseup",{clientX:u,clientY:h,bubbles:!0});e.dispatchEvent(L),await new Promise(y=>setTimeout(y,1e3))}async function Ze(e,t,r){try{const n=await(await fetch(e,{method:"POST",headers:r,body:JSON.stringify(t)})).json();if(n.code!==200){const a=n.msg;if(a){if(n.code===1||n.code===10||n.code===18||n.code===110){chrome.runtime.sendMessage({action:a}),stop=!0;return}if(n.code===17||n.code===19||n.code===429){chrome.runtime.sendMessage({action:a}),stop=!0;return}if([4,3,12,13,14,115].includes(n.code))return document.querySelector(".geetest_refresh").click(),null}}return n}catch(s){throw console.error("Error fetching coordinates:",s),s}}async function Qe(e){try{const t=await fetch("https://feedback.captchasonic.com/extFeedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const r=await t.json();return console.log("Success:",r),r}catch(t){return console.error("Error sending feedback:",t),null}}function et(e,t){const r=document.querySelector(e);if(!r){console.warn(`Element not found: ${e}`);return}return new MutationObserver(n=>{n.forEach(a=>{if(a.attributeName==="aria-hidden"){const u=r.getAttribute("aria-hidden")==="true";window.postMessage({type:"ariaHiddenChange",value:u},"*"),typeof t=="function"&&t(u)}})}).observe(r,{attributes:!0,attributeFilter:["aria-hidden"]}),r.getAttribute("aria-hidden")==="true"}function tt(e,t){const r=`${e}_feedback`;chrome.storage.local.get(`${e}_solved`,s=>{s[`${e}_solved`],chrome.storage.local.get([r],n=>{const a=n[r]||[];if(a.some(h=>h.fail_report===!0)){const h=a.map(p=>p.data),w={type:"feedback",payload:{apiKey:t,data:h,pass:!1}};h.length>0&&chrome.runtime.sendMessage(w,p=>{chrome.storage.local.remove([r,`${e}_solved`,`${e}_feedback`,`${e}_hasRun`],()=>{})})}chrome.storage.local.remove([r,`${e}_solved`],()=>{})})})}function rt(e,t){const r=`${e}_feedback`;chrome.storage.local.get(`${e}_solved`,s=>{s[`${e}_solved`],chrome.storage.local.get([r],n=>{const a=n[r]||[];if(a.some(h=>h.pass_report===!0)){const h=a.map(p=>p.data),w={type:"feedback",payload:{apiKey:t,data:h,pass:!0}};h.length>0&&chrome.runtime.sendMessage(w,p=>{chrome.storage.local.remove([r,`${e}_solved`,`${e}_feedback`],()=>{})})}chrome.storage.local.remove([r,`${e}_solved`],()=>{})})})}async function st(e,t=50,r=.1){return new Promise((s,n)=>{const a=atob(e),u=new Array(a.length);for(let d=0;d<a.length;d++)u[d]=a.charCodeAt(d);const h=new Uint8Array(u),A=new Blob([h],{type:"image/jpeg"}),w=URL.createObjectURL(A),p=new Image;p.onload=()=>{URL.revokeObjectURL(w);const d=document.createElement("canvas");d.width=p.width,d.height=p.height,d.getContext("2d").drawImage(p,0,0);let y=.9,k,x;do k=d.toDataURL("image/jpeg",y),x=k.length*3/4/1024,y-=.05;while(x>t&&y>=r);x>t?n(new Error(`Couldn't compress below ${t}KB. Final size: ${x.toFixed(2)}KB`)):s(k.split(",")[1])},p.onerror=()=>{URL.revokeObjectURL(w),n(new Error("Image load failed (possibly corrupt base64)"))},p.src=w})}async function nt(e){return e.replace(/^data:image\/\w+;base64,/,"")}async function ot(e){return new Promise(t=>{chrome.runtime.sendMessage({type:"GET_IMAGE_BASE64",payload:{url:e}},r=>{r?.success?t(r.data):t(null)})})}function at(){return new Promise((e,t)=>{chrome.runtime.sendMessage({action:"getActiveTabUrl"},r=>{chrome.runtime.lastError?t(chrome.runtime.lastError):e(r.url)})})}const R={version:Oe,$:j,$$:he,isMulti:Ae,isGrid:pe,isBbox:be,isBboxDD:Re,isWidget:_e,sleep:K,randTimer:Fe,isSolved:qe,countdownNotif:Le,getBase64FromUrl:we,refreshIframes:Ue,getEn:Be,skip:je,getBrowser:Ke,shuffle:De,fireMouseEvents:se,getCanvas:We,handleCanvasDD:Ye,getApi:Xe,clickMatchingElement:He,sliceOG:Ve,updateExamples:ze,getExamples:Ge,solveGeetestCaptcha:Je,sendCoordinatesRequest:Ze,geeFetchImage:Ne,sendFeedback:Qe,observeAriaHidden:et,handleCaptchaFeedback:tt,handleCaptchaFeedbackOnSuccess:rt,compressPureBase64Image:st,stripBase64Prefix:nt,fetchBase64Image:ot,getActiveTabUrl:at};async function it(e,t,r){if(!e()||e().ACTIVE===!1||e().OPTIONS[r].ENABLED===!1)return!1;function s(u,h){try{return h.some(w=>u.includes(w))}catch(A){return console.error("Error checking blacklist:",A),!1}}const n=e().BLACKLIST||[];return!(s(t(),n)&&e().BLACKLISTENABLED)}const ct={matches:["<all_urls>"],allFrames:!0,async main(){const[e,t]=ce(await chrome.storage.local.get("settings"));t(e().settings);let r;try{r=window.top.document.location.href}catch{r=window.location.href}const[s]=ce(r);if(!await it(e,s,"MTCAPTCHA"))return;let u=null,h=[],A=null,w=!1,p=0,d=!1,L="OcrImage",y="mtcaptcha",k=0,x=null;if(window.messageListenerAdded)return;window.messageListenerAdded=!0;const q=["mtcv1/api/getchallenge.json","mtcv1/api/getimage.json","mtcv1/api/getaudio.json"],O=new PerformanceObserver(o=>{for(const i of o.getEntries()){const g=i.name;if(g.includes("mtcv1/api/getchallenge.json")){const m=new URLSearchParams(g.split("?")[1]);m.get("rt")||m.get("uniquid")||m.get("cid")}q.some(m=>g.includes(m))&&(U(),O.disconnect())}});O.observe({type:"resource",buffered:!0});function U(){const o=document.createElement("script");o.src=chrome.runtime.getURL("themes/mt.js"),(document.head||document.documentElement).appendChild(o)}window.addEventListener("message",async o=>{try{if(o.data&&o.data.data){let i;try{i=JSON.parse(o.data.data)}catch{return}if(i.code===1200){const g=i.result?.challenge?.textChlg?.textlen;g&&(k=g,w=!0)}}}catch(i){console.error("Unexpected error in message listener:",i)}});function D(o){return new Promise(i=>setTimeout(i,o))}async function _(){if(!d){d=!0;try{e().OPTIONS.MTCAPTCHA.METHOD=="RECOGNITION"?await c():e().OPTIONS.MTCAPTCHA.METHOD=="audio"&&await l()}catch(o){console.log("Error in solving captcha: ",o)}finally{u=null,h=[],A=null}}}async function B(o,i,g,m,C,E){const T={type:"networkRequest",payload:{url:"https://api.captchasonic.com/createTask",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:o,task:{type:g,websiteURL:i,queries:m,module:C,maxLength:E}})}};chrome.runtime.sendMessage(T,async v=>{if(v.success){if(v=v.data,v.code!==200){const F=v.msg;if(F){if(v.code===1||v.code===10||v.code===18||v.code===110){chrome.runtime.sendMessage({action:F}),d=!0;return}if(v.code===17||v.code===19||v.code===429){chrome.runtime.sendMessage({action:F}),d=!0;return}[4,3,12,13,14,115].includes(v.code)&&await S()}}else if(v.code===200){A=document.querySelector(".mtcap-inputtext"),A===null&&(A=document.querySelector("#mtcap-inputtext-1"));const F=v.meta;if(F){const N="mtCaptcha_feedback";chrome.storage.local.get([N],W=>{const xe=W[N]||[];xe.push(F),chrome.storage.local.set({[N]:xe})})}if(v?.answers)try{p=v?.answers[0].length,f(A),await b(A,v?.answers[0])}catch{chrome.runtime.sendMessage({action:"no solutions"})}else{await S();return}}}else console.error("Error for Request 2:",v.error)})}async function c(){let o=null;if(o=document.querySelector(".mtcap-image"),o===null&&(o=document.querySelector("#mtcap-image-1")),o){const g=o.getAttribute("style").match(/url\((.*?)\)/);if(g&&g[1]){const m=g[1].replace(/['"]/g,"");x!==m&&(x=m,h.push(await R.getBase64FromUrl(m)))}}if(A=document.querySelector(".mtcap-inputtext"),A===null&&(A=document.querySelector("#mtcap-inputtext-1")),!o||!A){await S();return}if(h.length===0){await S();return}await B(e().APIKEY,s(),L,h,y,k)}async function l(){if(u=document.querySelector("audio"),A=document.querySelector(".mtcap-inputtext"),!u||!A){await S();return}}function f(o){if(o&&typeof o.dispatchEvent=="function"){const i=new FocusEvent("focus",{bubbles:!0,cancelable:!0});o.dispatchEvent(i);const g=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0,buttons:1});o.dispatchEvent(g);const m=new MouseEvent("mouseup",{view:window,bubbles:!0,cancelable:!0,buttons:0});o.dispatchEvent(m);for(const C of["mouseover","mousedown","mouseup","click"]){const E=new MouseEvent(C,{view:window,bubbles:!0,cancelable:!0});o.dispatchEvent(E)}}else console.log("Invalid element or dispatchEvent is not available.")}async function b(o,i){function g(C,E,T){const v=new E(T);C.dispatchEvent(v)}function m(C){["mouseover","mousedown","mouseup","click"].forEach(E=>{g(C,MouseEvent,{bubbles:!0,cancelable:!0,view:window,type:E})})}m(o),g(o,FocusEvent,{bubbles:!0,cancelable:!0,type:"focus"});for(let C=0;C<i.length;C++){const E=i[C];if(await R.sleep(500),Math.random()<.05){const N=String.fromCharCode(Math.floor(Math.random()*26)+97);o.value+=N,o.dispatchEvent(new Event("input",{bubbles:!0})),await R.sleep(Math.random()*200+50),o.value=o.value.slice(0,-1),o.dispatchEvent(new Event("input",{bubbles:!0}))}const T=new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,view:window,key:E,code:`Key${E.toUpperCase()}`,location:0}),v=new KeyboardEvent("keypress",{bubbles:!0,cancelable:!0,view:window,key:E,code:`Key${E.toUpperCase()}`,location:0}),F=new KeyboardEvent("keyup",{bubbles:!0,cancelable:!0,view:window,key:E,code:`Key${E.toUpperCase()}`,location:0});o.dispatchEvent(T),o.dispatchEvent(v),o.value+=E,o.dispatchEvent(new Event("input",{bubbles:!0})),o.dispatchEvent(F)}g(o,FocusEvent,{bubbles:!0,cancelable:!0,type:"blur"}),await M()}async function M(){await R.sleep(5e3);let o=null;if(o=document.querySelector(".mtcap-image"),o===null&&(o=document.querySelector("#mtcap-image-1")),o){const g=o.getAttribute("style").match(/url\((.*?)\)/);if(g&&g[1])if(g[1].replace(/['"]/g,"")===x)await S();else{d=!1;return}}else console.log("not fouond image element")}async function S(){await R.sleep(2e3),d=!1;let o=null;return o=document.querySelector(".mtcap-statusbutton"),o===null&&(o=document.querySelector("#mtcap-statusbutton-1")),o?.click()}for(chrome.storage.local.get(null,o=>{Object.keys(o).forEach(i=>{i.endsWith("_hasRun")&&chrome.storage.local.remove(i),i.endsWith("_feedback")&&chrome.storage.local.remove(i)}),chrome.storage.local.set({mtCaptcha_hasRun:!1}),chrome.storage.local.set({mtCaptcha_solved:!0})}),(()=>{let o=0;const i=68;new MutationObserver((m,C)=>{for(const E of m)if(E.type==="childList"){const T=document.querySelector(".mtcap-msg");T&&(C.disconnect(),new MutationObserver(F=>{for(const N of F)if(N.type==="childList"){const W=T.textContent.trim();W==="reloading..."&&o++,W==="Verified Successfully"&&o++,W==="Verified Successfully"&&o===i&&(R.handleCaptchaFeedbackOnSuccess("mtCaptcha",e().APIKEY),o=0),o===i&&(chrome.storage.local.set({mtCaptcha_solved:!1}),chrome.storage.local.set({mtCaptcha_hasRun:!1}),R.handleCaptchaFeedback("mtCaptcha",e().APIKEY),o=0)}}).observe(T,{childList:!0,subtree:!0}))}}).observe(document.body,{childList:!0,subtree:!0})})();e().ACTIVE===!0&&!e().BLACKLIST.includes(s())&&e()?.AUTOOPENENABLED;)if(await D(3e3),e().OPTIONS.MTCAPTCHA.AUTOSOLVE&&d!==!0){let o=document.querySelector(".desc4InputText"),i="";o&&(i=o.textContent),i!=="captcha verified successfully."&&d!==!0&&await _()}}};function lt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Z={exports:{}},ut=Z.exports,ve;function gt(){return ve||(ve=1,function(e,t){(function(r,s){s(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ut,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const s="The message port closed before a response was received.",n=a=>{const u={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(u).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class h extends WeakMap{constructor(l,f=void 0){super(f),this.createItem=l}get(l){return this.has(l)||this.set(l,this.createItem(l)),super.get(l)}}const A=c=>c&&typeof c=="object"&&typeof c.then=="function",w=(c,l)=>(...f)=>{a.runtime.lastError?c.reject(new Error(a.runtime.lastError.message)):l.singleCallbackArg||f.length<=1&&l.singleCallbackArg!==!1?c.resolve(f[0]):c.resolve(f)},p=c=>c==1?"argument":"arguments",d=(c,l)=>function(b,...M){if(M.length<l.minArgs)throw new Error(`Expected at least ${l.minArgs} ${p(l.minArgs)} for ${c}(), got ${M.length}`);if(M.length>l.maxArgs)throw new Error(`Expected at most ${l.maxArgs} ${p(l.maxArgs)} for ${c}(), got ${M.length}`);return new Promise((S,o)=>{if(l.fallbackToNoCallback)try{b[c](...M,w({resolve:S,reject:o},l))}catch(i){console.warn(`${c} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,i),b[c](...M),l.fallbackToNoCallback=!1,l.noCallback=!0,S()}else l.noCallback?(b[c](...M),S()):b[c](...M,w({resolve:S,reject:o},l))})},L=(c,l,f)=>new Proxy(l,{apply(b,M,S){return f.call(M,c,...S)}});let y=Function.call.bind(Object.prototype.hasOwnProperty);const k=(c,l={},f={})=>{let b=Object.create(null),M={has(o,i){return i in c||i in b},get(o,i,g){if(i in b)return b[i];if(!(i in c))return;let m=c[i];if(typeof m=="function")if(typeof l[i]=="function")m=L(c,c[i],l[i]);else if(y(f,i)){let C=d(i,f[i]);m=L(c,c[i],C)}else m=m.bind(c);else if(typeof m=="object"&&m!==null&&(y(l,i)||y(f,i)))m=k(m,l[i],f[i]);else if(y(f,"*"))m=k(m,l[i],f["*"]);else return Object.defineProperty(b,i,{configurable:!0,enumerable:!0,get(){return c[i]},set(C){c[i]=C}}),m;return b[i]=m,m},set(o,i,g,m){return i in b?b[i]=g:c[i]=g,!0},defineProperty(o,i,g){return Reflect.defineProperty(b,i,g)},deleteProperty(o,i){return Reflect.deleteProperty(b,i)}},S=Object.create(c);return new Proxy(S,M)},x=c=>({addListener(l,f,...b){l.addListener(c.get(f),...b)},hasListener(l,f){return l.hasListener(c.get(f))},removeListener(l,f){l.removeListener(c.get(f))}}),q=new h(c=>typeof c!="function"?c:function(f){const b=k(f,{},{getContent:{minArgs:0,maxArgs:0}});c(b)}),O=new h(c=>typeof c!="function"?c:function(f,b,M){let S=!1,o,i=new Promise(E=>{o=function(T){S=!0,E(T)}}),g;try{g=c(f,b,o)}catch(E){g=Promise.reject(E)}const m=g!==!0&&A(g);if(g!==!0&&!m&&!S)return!1;const C=E=>{E.then(T=>{M(T)},T=>{let v;T&&(T instanceof Error||typeof T.message=="string")?v=T.message:v="An unexpected error occurred",M({__mozWebExtensionPolyfillReject__:!0,message:v})}).catch(T=>{console.error("Failed to send onMessage rejected reply",T)})};return C(m?g:i),!0}),U=({reject:c,resolve:l},f)=>{a.runtime.lastError?a.runtime.lastError.message===s?l():c(new Error(a.runtime.lastError.message)):f&&f.__mozWebExtensionPolyfillReject__?c(new Error(f.message)):l(f)},D=(c,l,f,...b)=>{if(b.length<l.minArgs)throw new Error(`Expected at least ${l.minArgs} ${p(l.minArgs)} for ${c}(), got ${b.length}`);if(b.length>l.maxArgs)throw new Error(`Expected at most ${l.maxArgs} ${p(l.maxArgs)} for ${c}(), got ${b.length}`);return new Promise((M,S)=>{const o=U.bind(null,{resolve:M,reject:S});b.push(o),f.sendMessage(...b)})},_={devtools:{network:{onRequestFinished:x(q)}},runtime:{onMessage:x(O),onMessageExternal:x(O),sendMessage:D.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:D.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},B={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return u.privacy={network:{"*":B},services:{"*":B},websites:{"*":B}},k(a,_,u)};r.exports=n(chrome)}})}(Z)),Z.exports}var mt=gt();const ye=lt(mt);function Q(e,...t){}const dt={debug:(...e)=>Q(console.debug,...e),log:(...e)=>Q(console.log,...e),warn:(...e)=>Q(console.warn,...e),error:(...e)=>Q(console.error,...e)};class oe extends Event{constructor(t,r){super(oe.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=r}static EVENT_NAME=ae("wxt:locationchange")}function ae(e){return`${ye?.runtime?.id}:mtCaptcha:${e}`}function ft(e){let t,r;return{run(){t==null&&(r=new URL(location.href),t=e.setInterval(()=>{let s=new URL(location.href);s.href!==r.href&&(window.dispatchEvent(new oe(s,r)),r=s)},1e3))}}}class ee{constructor(t,r){this.contentScriptName=t,this.options=r,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=ae("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=ft(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return ye.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,r){const s=setInterval(()=>{this.isValid&&t()},r);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(t,r){const s=setTimeout(()=>{this.isValid&&t()},r);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(t){const r=requestAnimationFrame((...s)=>{this.isValid&&t(...s)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(t,r){const s=requestIdleCallback((...n)=>{this.signal.aborted||t(...n)},r);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(t,r,s,n){r==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),t.addEventListener?.(r.startsWith("wxt:")?ae(r):r,s,{...n,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),dt.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:ee.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(t){const r=t.data?.type===ee.SCRIPT_STARTED_MESSAGE_TYPE,s=t.data?.contentScriptName===this.contentScriptName,n=!this.receivedMessageIds.has(t.data?.messageId);return r&&s&&n}listenForNewerScripts(t){let r=!0;const s=n=>{if(this.verifyScriptStartedEvent(n)){this.receivedMessageIds.add(n.data.messageId);const a=r;if(r=!1,a&&t?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))}}const ht=Symbol("null");let At=0;class pt extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[t]=arguments;if(t!=null){if(typeof t[Symbol.iterator]!="function")throw new TypeError(typeof t+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[r,s]of t)this.set(r,s)}}_getPublicKeys(t,r=!1){if(!Array.isArray(t))throw new TypeError("The keys parameter must be an array");const s=this._getPrivateKey(t,r);let n;return s&&this._publicKeys.has(s)?n=this._publicKeys.get(s):r&&(n=[...t],this._publicKeys.set(s,n)),{privateKey:s,publicKey:n}}_getPrivateKey(t,r=!1){const s=[];for(let n of t){n===null&&(n=ht);const a=typeof n=="object"||typeof n=="function"?"_objectHashes":typeof n=="symbol"?"_symbolHashes":!1;if(!a)s.push(n);else if(this[a].has(n))s.push(this[a].get(n));else if(r){const u=`@@mkm-ref-${At++}@@`;this[a].set(n,u),s.push(u)}else return!1}return JSON.stringify(s)}set(t,r){const{publicKey:s}=this._getPublicKeys(t,!0);return super.set(s,r)}get(t){const{publicKey:r}=this._getPublicKeys(t);return super.get(r)}has(t){const{publicKey:r}=this._getPublicKeys(t);return super.has(r)}delete(t){const{publicKey:r,privateKey:s}=this._getPublicKeys(t);return!!(r&&super.delete(r)&&this._publicKeys.delete(s))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new pt;function xt(){}function te(e,...t){}const bt={debug:(...e)=>te(console.debug,...e),log:(...e)=>te(console.log,...e),warn:(...e)=>te(console.warn,...e),error:(...e)=>te(console.error,...e)};return(async()=>{try{const{main:e,...t}=ct,r=new ee("mtCaptcha",t);return await e(r)}catch(e){throw bt.error('The content script "mtCaptcha" crashed on startup!',e),e}})()}();
mtcaptcha;
